var kn=Object.defineProperty;var Nn=(t,e,n)=>e in t?kn(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n;var ut=(t,e,n)=>Nn(t,typeof e!="symbol"?e+"":e,n);import"./CWj6FrbW.js";import{p as Pn,ab as Yt,o as Vn,t as Rn,a as zn,i as In,v as ot,I as xt,r as Ln,m as Me}from"./CC5yXr9j.js";import{t as Dn,a as Zn,s as Fn,b as Se,j as Hn}from"./DwwxyTTL.js";import{bs as $n,aK as Ae,aJ as Bn,bt as Gn,aT as Un,aS as qn,bu as Wn,bv as jn,bw as Xn,bx as Yn,aW as Qn,by as Ee}from"./CqhC6ptB.js";import{p as Ce,b as _e}from"./B7VIZYAR.js";import{u as Kn}from"./DMJp7AnL.js";import"./BMvM_mkF.js";let Tt=!0,on,Dt,Zt;const Jn=1e3,tr=150,an=$n(()=>{Tt=!0,on()},Jn),er=(t,e)=>{Zt==null||Zt(),on=e;const n=t>tr;Tt||an(),Tt=!n},nr=()=>(Dt||(Dt=new Promise(t=>{Zt=()=>{Dt=void 0,t()}})),Tt||an(),Tt),Fs=()=>Dt??Promise.resolve();var rr=function(){var t="",e,n,r,s=[],i={passive:!0},a={passive:!1};window.addEventListener?(e="addEventListener",n="removeEventListener"):(e="attachEvent",n="detachEvent",t="on"),r="onwheel"in document.createElement("div")?"wheel":document.onmousewheel!==void 0?"mousewheel":"DOMMouseScroll";function o(d,m){var g=function(v){!v&&(v=window.event);var y={originalEvent:v,target:v.target||v.srcElement,type:"wheel",deltaMode:v.type=="MozMousePixelScroll"?0:1,deltaX:0,delatZ:0,preventDefault:function(){v.preventDefault?v.preventDefault():v.returnValue=!1}};return r=="mousewheel"?(y.deltaY=-.025*v.wheelDelta,v.wheelDeltaX&&(y.deltaX=-.025*v.wheelDeltaX)):y.deltaY=v.detail,m(y)};return s.push({element:d,fn:g}),g}function l(d){for(var m=0;m<s.length;m++)if(s[m].element===d)return s[m].fn;return function(){}}function u(d){for(var m=0;m<s.length;m++)if(s[m].element===d)return s.splice(m,1)}function h(d,m,g,v){var y;r==="wheel"?y=g:y=o(d,g),d[e](t+m,y,v?i:a)}function c(d,m,g,v){var y;r==="wheel"?y=g:y=l(d),d[n](t+m,y,v?i:a),u(d)}function f(d,m,g){h(d,r,m,g),r=="DOMMouseScroll"&&h(d,"MozMousePixelScroll",m,g)}function p(d,m,g){c(d,r,m,g),r=="DOMMouseScroll"&&c(d,"MozMousePixelScroll",m,g)}return{on:f,off:p}}(),me={extend:function(t,e){t=t||{};for(var n in e)this.isObject(e[n])?t[n]=this.extend(t[n],e[n]):t[n]=e[n];return t},isElement:function(t){return t instanceof HTMLElement||t instanceof SVGElement||t instanceof SVGSVGElement||t&&typeof t=="object"&&t!==null&&t.nodeType===1&&typeof t.nodeName=="string"},isObject:function(t){return Object.prototype.toString.call(t)==="[object Object]"},isNumber:function(t){return!isNaN(parseFloat(t))&&isFinite(t)},getSvg:function(t){var e,n;if(this.isElement(t))e=t;else if(typeof t=="string"||t instanceof String){if(e=document.querySelector(t),!e)throw new Error("Provided selector did not find any elements. Selector: "+t)}else throw new Error("Provided selector is not an HTML object nor String");if(e.tagName.toLowerCase()==="svg")n=e;else if(e.tagName.toLowerCase()==="object")n=e.contentDocument.documentElement;else if(e.tagName.toLowerCase()==="embed")n=e.getSVGDocument().documentElement;else throw e.tagName.toLowerCase()==="img"?new Error('Cannot script an SVG in an "img" element. Please use an "object" element or an in-line SVG.'):new Error("Cannot get SVG.");return n},proxy:function(t,e){return function(){return t.apply(e,arguments)}},getType:function(t){return Object.prototype.toString.apply(t).replace(/^\[object\s/,"").replace(/\]$/,"")},mouseAndTouchNormalize:function(t,e){if(t.clientX===void 0||t.clientX===null)if(t.clientX=0,t.clientY=0,t.touches!==void 0&&t.touches.length){if(t.touches[0].clientX!==void 0)t.clientX=t.touches[0].clientX,t.clientY=t.touches[0].clientY;else if(t.touches[0].pageX!==void 0){var n=e.getBoundingClientRect();t.clientX=t.touches[0].pageX-n.left,t.clientY=t.touches[0].pageY-n.top}}else t.originalEvent!==void 0&&t.originalEvent.clientX!==void 0&&(t.clientX=t.originalEvent.clientX,t.clientY=t.originalEvent.clientY)},isDblClick:function(t,e){if(t.detail===2)return!0;if(e!=null){var n=t.timeStamp-e.timeStamp,r=Math.sqrt(Math.pow(t.clientX-e.clientX,2)+Math.pow(t.clientY-e.clientY,2));return n<250&&r<10}return!1},now:Date.now||function(){return new Date().getTime()},throttle:function(t,e,n){var r=this,s,i,a,o=null,l=0;n||(n={});var u=function(){l=n.leading===!1?0:r.now(),o=null,a=t.apply(s,i),o||(s=i=null)};return function(){var h=r.now();!l&&n.leading===!1&&(l=h);var c=e-(h-l);return s=this,i=arguments,c<=0||c>e?(clearTimeout(o),o=null,l=h,a=t.apply(s,i),o||(s=i=null)):!o&&n.trailing!==!1&&(o=setTimeout(u,c)),a}},createRequestAnimationFrame:function(t){var e=null;return t!=="auto"&&t<60&&t>1&&(e=Math.floor(1e3/t)),e===null?window.requestAnimationFrame||Oe(33):Oe(e)}};function Oe(t){return function(e){window.setTimeout(e,t)}}var Qt=me,ln="unknown";document.documentMode&&(ln="ie");var ge={svgNS:"http://www.w3.org/2000/svg",xmlNS:"http://www.w3.org/XML/1998/namespace",xmlnsNS:"http://www.w3.org/2000/xmlns/",xlinkNS:"http://www.w3.org/1999/xlink",evNS:"http://www.w3.org/2001/xml-events",getBoundingClientRectNormalized:function(t){if(t.clientWidth&&t.clientHeight)return{width:t.clientWidth,height:t.clientHeight};if(t.getBoundingClientRect())return t.getBoundingClientRect();throw new Error("Cannot get BoundingClientRect for SVG.")},getOrCreateViewport:function(t,e){var n=null;if(Qt.isElement(e)?n=e:n=t.querySelector(e),!n){var r=Array.prototype.slice.call(t.childNodes||t.children).filter(function(l){return l.nodeName!=="defs"&&l.nodeName!=="#text"});r.length===1&&r[0].nodeName==="g"&&r[0].getAttribute("transform")===null&&(n=r[0])}if(!n){var s="viewport-"+new Date().toISOString().replace(/\D/g,"");n=document.createElementNS(this.svgNS,"g"),n.setAttribute("id",s);var i=t.childNodes||t.children;if(i&&i.length>0)for(var a=i.length;a>0;a--)i[i.length-a].nodeName!=="defs"&&n.appendChild(i[i.length-a]);t.appendChild(n)}var o=[];return n.getAttribute("class")&&(o=n.getAttribute("class").split(" ")),~o.indexOf("svg-pan-zoom_viewport")||(o.push("svg-pan-zoom_viewport"),n.setAttribute("class",o.join(" "))),n},setupSvgAttributes:function(t){if(t.setAttribute("xmlns",this.svgNS),t.setAttributeNS(this.xmlnsNS,"xmlns:xlink",this.xlinkNS),t.setAttributeNS(this.xmlnsNS,"xmlns:ev",this.evNS),t.parentNode!==null){var e=t.getAttribute("style")||"";e.toLowerCase().indexOf("overflow")===-1&&t.setAttribute("style","overflow: hidden; "+e)}},internetExplorerRedisplayInterval:300,refreshDefsGlobal:Qt.throttle(function(){for(var t=document.querySelectorAll("defs"),e=t.length,n=0;n<e;n++){var r=t[n];r.parentNode.insertBefore(r,r)}},Ae?Ae.internetExplorerRedisplayInterval:null),setCTM:function(t,e,n){var r=this,s="matrix("+e.a+","+e.b+","+e.c+","+e.d+","+e.e+","+e.f+")";t.setAttributeNS(null,"transform",s),"transform"in t.style?t.style.transform=s:"-ms-transform"in t.style?t.style["-ms-transform"]=s:"-webkit-transform"in t.style&&(t.style["-webkit-transform"]=s),ln==="ie"&&n&&(n.parentNode.insertBefore(n,n),window.setTimeout(function(){r.refreshDefsGlobal()},r.internetExplorerRedisplayInterval))},getEventPoint:function(t,e){var n=e.createSVGPoint();return Qt.mouseAndTouchNormalize(t,e),n.x=t.clientX,n.y=t.clientY,n},getSvgCenterPoint:function(t,e,n){return this.createSVGPoint(t,e/2,n/2)},createSVGPoint:function(t,e,n){var r=t.createSVGPoint();return r.x=e,r.y=n,r}},j=ge,sr={enable:function(t){var e=t.svg.querySelector("defs");e||(e=document.createElementNS(j.svgNS,"defs"),t.svg.appendChild(e));var n=e.querySelector("style#svg-pan-zoom-controls-styles");if(!n){var r=document.createElementNS(j.svgNS,"style");r.setAttribute("id","svg-pan-zoom-controls-styles"),r.setAttribute("type","text/css"),r.textContent=".svg-pan-zoom-control { cursor: pointer; fill: black; fill-opacity: 0.333; } .svg-pan-zoom-control:hover { fill-opacity: 0.8; } .svg-pan-zoom-control-background { fill: white; fill-opacity: 0.5; } .svg-pan-zoom-control-background { fill-opacity: 0.8; }",e.appendChild(r)}var s=document.createElementNS(j.svgNS,"g");s.setAttribute("id","svg-pan-zoom-controls"),s.setAttribute("transform","translate("+(t.width-70)+" "+(t.height-76)+") scale(0.75)"),s.setAttribute("class","svg-pan-zoom-control"),s.appendChild(this._createZoomIn(t)),s.appendChild(this._createZoomReset(t)),s.appendChild(this._createZoomOut(t)),t.svg.appendChild(s),t.controlIcons=s},_createZoomIn:function(t){var e=document.createElementNS(j.svgNS,"g");e.setAttribute("id","svg-pan-zoom-zoom-in"),e.setAttribute("transform","translate(30.5 5) scale(0.015)"),e.setAttribute("class","svg-pan-zoom-control"),e.addEventListener("click",function(){t.getPublicInstance().zoomIn()},!1),e.addEventListener("touchstart",function(){t.getPublicInstance().zoomIn()},!1);var n=document.createElementNS(j.svgNS,"rect");n.setAttribute("x","0"),n.setAttribute("y","0"),n.setAttribute("width","1500"),n.setAttribute("height","1400"),n.setAttribute("class","svg-pan-zoom-control-background"),e.appendChild(n);var r=document.createElementNS(j.svgNS,"path");return r.setAttribute("d","M1280 576v128q0 26 -19 45t-45 19h-320v320q0 26 -19 45t-45 19h-128q-26 0 -45 -19t-19 -45v-320h-320q-26 0 -45 -19t-19 -45v-128q0 -26 19 -45t45 -19h320v-320q0 -26 19 -45t45 -19h128q26 0 45 19t19 45v320h320q26 0 45 19t19 45zM1536 1120v-960 q0 -119 -84.5 -203.5t-203.5 -84.5h-960q-119 0 -203.5 84.5t-84.5 203.5v960q0 119 84.5 203.5t203.5 84.5h960q119 0 203.5 -84.5t84.5 -203.5z"),r.setAttribute("class","svg-pan-zoom-control-element"),e.appendChild(r),e},_createZoomReset:function(t){var e=document.createElementNS(j.svgNS,"g");e.setAttribute("id","svg-pan-zoom-reset-pan-zoom"),e.setAttribute("transform","translate(5 35) scale(0.4)"),e.setAttribute("class","svg-pan-zoom-control"),e.addEventListener("click",function(){t.getPublicInstance().reset()},!1),e.addEventListener("touchstart",function(){t.getPublicInstance().reset()},!1);var n=document.createElementNS(j.svgNS,"rect");n.setAttribute("x","2"),n.setAttribute("y","2"),n.setAttribute("width","182"),n.setAttribute("height","58"),n.setAttribute("class","svg-pan-zoom-control-background"),e.appendChild(n);var r=document.createElementNS(j.svgNS,"path");r.setAttribute("d","M33.051,20.632c-0.742-0.406-1.854-0.609-3.338-0.609h-7.969v9.281h7.769c1.543,0,2.701-0.188,3.473-0.562c1.365-0.656,2.048-1.953,2.048-3.891C35.032,22.757,34.372,21.351,33.051,20.632z"),r.setAttribute("class","svg-pan-zoom-control-element"),e.appendChild(r);var s=document.createElementNS(j.svgNS,"path");return s.setAttribute("d","M170.231,0.5H15.847C7.102,0.5,0.5,5.708,0.5,11.84v38.861C0.5,56.833,7.102,61.5,15.847,61.5h154.384c8.745,0,15.269-4.667,15.269-10.798V11.84C185.5,5.708,178.976,0.5,170.231,0.5z M42.837,48.569h-7.969c-0.219-0.766-0.375-1.383-0.469-1.852c-0.188-0.969-0.289-1.961-0.305-2.977l-0.047-3.211c-0.03-2.203-0.41-3.672-1.142-4.406c-0.732-0.734-2.103-1.102-4.113-1.102h-7.05v13.547h-7.055V14.022h16.524c2.361,0.047,4.178,0.344,5.45,0.891c1.272,0.547,2.351,1.352,3.234,2.414c0.731,0.875,1.31,1.844,1.737,2.906s0.64,2.273,0.64,3.633c0,1.641-0.414,3.254-1.242,4.84s-2.195,2.707-4.102,3.363c1.594,0.641,2.723,1.551,3.387,2.73s0.996,2.98,0.996,5.402v2.32c0,1.578,0.063,2.648,0.19,3.211c0.19,0.891,0.635,1.547,1.333,1.969V48.569z M75.579,48.569h-26.18V14.022h25.336v6.117H56.454v7.336h16.781v6H56.454v8.883h19.125V48.569z M104.497,46.331c-2.44,2.086-5.887,3.129-10.34,3.129c-4.548,0-8.125-1.027-10.731-3.082s-3.909-4.879-3.909-8.473h6.891c0.224,1.578,0.662,2.758,1.316,3.539c1.196,1.422,3.246,2.133,6.15,2.133c1.739,0,3.151-0.188,4.236-0.562c2.058-0.719,3.087-2.055,3.087-4.008c0-1.141-0.504-2.023-1.512-2.648c-1.008-0.609-2.607-1.148-4.796-1.617l-3.74-0.82c-3.676-0.812-6.201-1.695-7.576-2.648c-2.328-1.594-3.492-4.086-3.492-7.477c0-3.094,1.139-5.664,3.417-7.711s5.623-3.07,10.036-3.07c3.685,0,6.829,0.965,9.431,2.895c2.602,1.93,3.966,4.73,4.093,8.402h-6.938c-0.128-2.078-1.057-3.555-2.787-4.43c-1.154-0.578-2.587-0.867-4.301-0.867c-1.907,0-3.428,0.375-4.565,1.125c-1.138,0.75-1.706,1.797-1.706,3.141c0,1.234,0.561,2.156,1.682,2.766c0.721,0.406,2.25,0.883,4.589,1.43l6.063,1.43c2.657,0.625,4.648,1.461,5.975,2.508c2.059,1.625,3.089,3.977,3.089,7.055C108.157,41.624,106.937,44.245,104.497,46.331z M139.61,48.569h-26.18V14.022h25.336v6.117h-18.281v7.336h16.781v6h-16.781v8.883h19.125V48.569z M170.337,20.14h-10.336v28.43h-7.266V20.14h-10.383v-6.117h27.984V20.14z"),s.setAttribute("class","svg-pan-zoom-control-element"),e.appendChild(s),e},_createZoomOut:function(t){var e=document.createElementNS(j.svgNS,"g");e.setAttribute("id","svg-pan-zoom-zoom-out"),e.setAttribute("transform","translate(30.5 70) scale(0.015)"),e.setAttribute("class","svg-pan-zoom-control"),e.addEventListener("click",function(){t.getPublicInstance().zoomOut()},!1),e.addEventListener("touchstart",function(){t.getPublicInstance().zoomOut()},!1);var n=document.createElementNS(j.svgNS,"rect");n.setAttribute("x","0"),n.setAttribute("y","0"),n.setAttribute("width","1500"),n.setAttribute("height","1400"),n.setAttribute("class","svg-pan-zoom-control-background"),e.appendChild(n);var r=document.createElementNS(j.svgNS,"path");return r.setAttribute("d","M1280 576v128q0 26 -19 45t-45 19h-896q-26 0 -45 -19t-19 -45v-128q0 -26 19 -45t45 -19h896q26 0 45 19t19 45zM1536 1120v-960q0 -119 -84.5 -203.5t-203.5 -84.5h-960q-119 0 -203.5 84.5t-84.5 203.5v960q0 119 84.5 203.5t203.5 84.5h960q119 0 203.5 -84.5 t84.5 -203.5z"),r.setAttribute("class","svg-pan-zoom-control-element"),e.appendChild(r),e},disable:function(t){t.controlIcons&&(t.controlIcons.parentNode.removeChild(t.controlIcons),t.controlIcons=null)}},ir=ge,mt=me,$=function(t,e){this.init(t,e)};$.prototype.init=function(t,e){this.viewport=t,this.options=e,this.originalState={zoom:1,x:0,y:0},this.activeState={zoom:1,x:0,y:0},this.updateCTMCached=mt.proxy(this.updateCTM,this),this.requestAnimationFrame=mt.createRequestAnimationFrame(this.options.refreshRate),this.viewBox={x:0,y:0,width:0,height:0},this.cacheViewBox();var n=this.processCTM();this.setCTM(n),this.updateCTM()};$.prototype.cacheViewBox=function(){var t=this.options.svg.getAttribute("viewBox");if(t){var e=t.split(/[\s\,]/).filter(function(r){return r}).map(parseFloat);this.viewBox.x=e[0],this.viewBox.y=e[1],this.viewBox.width=e[2],this.viewBox.height=e[3];var n=Math.min(this.options.width/this.viewBox.width,this.options.height/this.viewBox.height);this.activeState.zoom=n,this.activeState.x=(this.options.width-this.viewBox.width*n)/2,this.activeState.y=(this.options.height-this.viewBox.height*n)/2,this.updateCTMOnNextFrame(),this.options.svg.removeAttribute("viewBox")}else this.simpleViewBoxCache()};$.prototype.simpleViewBoxCache=function(){var t=this.viewport.getBBox();this.viewBox.x=t.x,this.viewBox.y=t.y,this.viewBox.width=t.width,this.viewBox.height=t.height};$.prototype.getViewBox=function(){return mt.extend({},this.viewBox)};$.prototype.processCTM=function(){var t=this.getCTM();if(this.options.fit||this.options.contain){var e;this.options.fit?e=Math.min(this.options.width/this.viewBox.width,this.options.height/this.viewBox.height):e=Math.max(this.options.width/this.viewBox.width,this.options.height/this.viewBox.height),t.a=e,t.d=e,t.e=-this.viewBox.x*e,t.f=-this.viewBox.y*e}if(this.options.center){var n=(this.options.width-(this.viewBox.width+this.viewBox.x*2)*t.a)*.5,r=(this.options.height-(this.viewBox.height+this.viewBox.y*2)*t.a)*.5;t.e=n,t.f=r}return this.originalState.zoom=t.a,this.originalState.x=t.e,this.originalState.y=t.f,t};$.prototype.getOriginalState=function(){return mt.extend({},this.originalState)};$.prototype.getState=function(){return mt.extend({},this.activeState)};$.prototype.getZoom=function(){return this.activeState.zoom};$.prototype.getRelativeZoom=function(){return this.activeState.zoom/this.originalState.zoom};$.prototype.computeRelativeZoom=function(t){return t/this.originalState.zoom};$.prototype.getPan=function(){return{x:this.activeState.x,y:this.activeState.y}};$.prototype.getCTM=function(){var t=this.options.svg.createSVGMatrix();return t.a=this.activeState.zoom,t.b=0,t.c=0,t.d=this.activeState.zoom,t.e=this.activeState.x,t.f=this.activeState.y,t};$.prototype.setCTM=function(t){var e=this.isZoomDifferent(t),n=this.isPanDifferent(t);if(e||n){if(e&&(this.options.beforeZoom(this.getRelativeZoom(),this.computeRelativeZoom(t.a))===!1?(t.a=t.d=this.activeState.zoom,e=!1):(this.updateCache(t),this.options.onZoom(this.getRelativeZoom()))),n){var r=this.options.beforePan(this.getPan(),{x:t.e,y:t.f}),s=!1,i=!1;r===!1?(t.e=this.getPan().x,t.f=this.getPan().y,s=i=!0):mt.isObject(r)&&(r.x===!1?(t.e=this.getPan().x,s=!0):mt.isNumber(r.x)&&(t.e=r.x),r.y===!1?(t.f=this.getPan().y,i=!0):mt.isNumber(r.y)&&(t.f=r.y)),s&&i||!this.isPanDifferent(t)?n=!1:(this.updateCache(t),this.options.onPan(this.getPan()))}(e||n)&&this.updateCTMOnNextFrame()}};$.prototype.isZoomDifferent=function(t){return this.activeState.zoom!==t.a};$.prototype.isPanDifferent=function(t){return this.activeState.x!==t.e||this.activeState.y!==t.f};$.prototype.updateCache=function(t){this.activeState.zoom=t.a,this.activeState.x=t.e,this.activeState.y=t.f};$.prototype.pendingUpdate=!1;$.prototype.updateCTMOnNextFrame=function(){this.pendingUpdate||(this.pendingUpdate=!0,this.requestAnimationFrame.call(window,this.updateCTMCached))};$.prototype.updateCTM=function(){var t=this.getCTM();ir.setCTM(this.viewport,t,this.defs),this.pendingUpdate=!1,this.options.onUpdatedCTM&&this.options.onUpdatedCTM(t)};var or=function(t,e){return new $(t,e)},un=rr,oe=sr,nt=me,it=ge,ar=or,P=function(t,e){this.init(t,e)},lr={viewportSelector:".svg-pan-zoom_viewport",panEnabled:!0,controlIconsEnabled:!1,zoomEnabled:!0,dblClickZoomEnabled:!0,mouseWheelZoomEnabled:!0,preventMouseEventsDefault:!0,zoomScaleSensitivity:.1,minZoom:.5,maxZoom:10,fit:!0,contain:!1,center:!0,refreshRate:"auto",beforeZoom:null,onZoom:null,beforePan:null,onPan:null,customEventsHandler:null,eventsListenerElement:null,onUpdatedCTM:null},hn={passive:!0};P.prototype.init=function(t,e){var n=this;this.svg=t,this.defs=t.querySelector("defs"),it.setupSvgAttributes(this.svg),this.options=nt.extend(nt.extend({},lr),e),this.state="none";var r=it.getBoundingClientRectNormalized(t);this.width=r.width,this.height=r.height,this.viewport=ar(it.getOrCreateViewport(this.svg,this.options.viewportSelector),{svg:this.svg,width:this.width,height:this.height,fit:this.options.fit,contain:this.options.contain,center:this.options.center,refreshRate:this.options.refreshRate,beforeZoom:function(i,a){if(n.viewport&&n.options.beforeZoom)return n.options.beforeZoom(i,a)},onZoom:function(i){if(n.viewport&&n.options.onZoom)return n.options.onZoom(i)},beforePan:function(i,a){if(n.viewport&&n.options.beforePan)return n.options.beforePan(i,a)},onPan:function(i){if(n.viewport&&n.options.onPan)return n.options.onPan(i)},onUpdatedCTM:function(i){if(n.viewport&&n.options.onUpdatedCTM)return n.options.onUpdatedCTM(i)}});var s=this.getPublicInstance();s.setBeforeZoom(this.options.beforeZoom),s.setOnZoom(this.options.onZoom),s.setBeforePan(this.options.beforePan),s.setOnPan(this.options.onPan),s.setOnUpdatedCTM(this.options.onUpdatedCTM),this.options.controlIconsEnabled&&oe.enable(this),this.lastMouseWheelEventTime=Date.now(),this.setupHandlers()};P.prototype.setupHandlers=function(){var t=this,e=null;if(this.eventListeners={mousedown:function(i){var a=t.handleMouseDown(i,e);return e=i,a},touchstart:function(i){var a=t.handleMouseDown(i,e);return e=i,a},mouseup:function(i){return t.handleMouseUp(i)},touchend:function(i){return t.handleMouseUp(i)},mousemove:function(i){return t.handleMouseMove(i)},touchmove:function(i){return t.handleMouseMove(i)},mouseleave:function(i){return t.handleMouseUp(i)},touchleave:function(i){return t.handleMouseUp(i)},touchcancel:function(i){return t.handleMouseUp(i)}},this.options.customEventsHandler!=null){this.options.customEventsHandler.init({svgElement:this.svg,eventsListenerElement:this.options.eventsListenerElement,instance:this.getPublicInstance()});var n=this.options.customEventsHandler.haltEventListeners;if(n&&n.length)for(var r=n.length-1;r>=0;r--)this.eventListeners.hasOwnProperty(n[r])&&delete this.eventListeners[n[r]]}for(var s in this.eventListeners)(this.options.eventsListenerElement||this.svg).addEventListener(s,this.eventListeners[s],this.options.preventMouseEventsDefault?!1:hn);this.options.mouseWheelZoomEnabled&&(this.options.mouseWheelZoomEnabled=!1,this.enableMouseWheelZoom())};P.prototype.enableMouseWheelZoom=function(){if(!this.options.mouseWheelZoomEnabled){var t=this;this.wheelListener=function(n){return t.handleMouseWheel(n)};var e=!this.options.preventMouseEventsDefault;un.on(this.options.eventsListenerElement||this.svg,this.wheelListener,e),this.options.mouseWheelZoomEnabled=!0}};P.prototype.disableMouseWheelZoom=function(){if(this.options.mouseWheelZoomEnabled){var t=!this.options.preventMouseEventsDefault;un.off(this.options.eventsListenerElement||this.svg,this.wheelListener,t),this.options.mouseWheelZoomEnabled=!1}};P.prototype.handleMouseWheel=function(t){if(!(!this.options.zoomEnabled||this.state!=="none")){this.options.preventMouseEventsDefault&&(t.preventDefault?t.preventDefault():t.returnValue=!1);var e=t.deltaY||1,n=Date.now()-this.lastMouseWheelEventTime,r=3+Math.max(0,30-n);this.lastMouseWheelEventTime=Date.now(),"deltaMode"in t&&t.deltaMode===0&&t.wheelDelta&&(e=t.deltaY===0?0:Math.abs(t.wheelDelta)/t.deltaY),e=-.3<e&&e<.3?e:(e>0?1:-1)*Math.log(Math.abs(e)+10)/r;var s=this.svg.getScreenCTM().inverse(),i=it.getEventPoint(t,this.svg).matrixTransform(s),a=Math.pow(1+this.options.zoomScaleSensitivity,-1*e);this.zoomAtPoint(a,i)}};P.prototype.zoomAtPoint=function(t,e,n){var r=this.viewport.getOriginalState();n?(t=Math.max(this.options.minZoom*r.zoom,Math.min(this.options.maxZoom*r.zoom,t)),t=t/this.getZoom()):this.getZoom()*t<this.options.minZoom*r.zoom?t=this.options.minZoom*r.zoom/this.getZoom():this.getZoom()*t>this.options.maxZoom*r.zoom&&(t=this.options.maxZoom*r.zoom/this.getZoom());var s=this.viewport.getCTM(),i=e.matrixTransform(s.inverse()),a=this.svg.createSVGMatrix().translate(i.x,i.y).scale(t).translate(-i.x,-i.y),o=s.multiply(a);o.a!==s.a&&this.viewport.setCTM(o)};P.prototype.zoom=function(t,e){this.zoomAtPoint(t,it.getSvgCenterPoint(this.svg,this.width,this.height),e)};P.prototype.publicZoom=function(t,e){e&&(t=this.computeFromRelativeZoom(t)),this.zoom(t,e)};P.prototype.publicZoomAtPoint=function(t,e,n){if(n&&(t=this.computeFromRelativeZoom(t)),nt.getType(e)!=="SVGPoint")if("x"in e&&"y"in e)e=it.createSVGPoint(this.svg,e.x,e.y);else throw new Error("Given point is invalid");this.zoomAtPoint(t,e,n)};P.prototype.getZoom=function(){return this.viewport.getZoom()};P.prototype.getRelativeZoom=function(){return this.viewport.getRelativeZoom()};P.prototype.computeFromRelativeZoom=function(t){return t*this.viewport.getOriginalState().zoom};P.prototype.resetZoom=function(){var t=this.viewport.getOriginalState();this.zoom(t.zoom,!0)};P.prototype.resetPan=function(){this.pan(this.viewport.getOriginalState())};P.prototype.reset=function(){this.resetZoom(),this.resetPan()};P.prototype.handleDblClick=function(t){if(this.options.preventMouseEventsDefault&&(t.preventDefault?t.preventDefault():t.returnValue=!1),this.options.controlIconsEnabled){var e=t.target.getAttribute("class")||"";if(e.indexOf("svg-pan-zoom-control")>-1)return!1}var n;t.shiftKey?n=1/((1+this.options.zoomScaleSensitivity)*2):n=(1+this.options.zoomScaleSensitivity)*2;var r=it.getEventPoint(t,this.svg).matrixTransform(this.svg.getScreenCTM().inverse());this.zoomAtPoint(n,r)};P.prototype.handleMouseDown=function(t,e){this.options.preventMouseEventsDefault&&(t.preventDefault?t.preventDefault():t.returnValue=!1),nt.mouseAndTouchNormalize(t,this.svg),this.options.dblClickZoomEnabled&&nt.isDblClick(t,e)?this.handleDblClick(t):(this.state="pan",this.firstEventCTM=this.viewport.getCTM(),this.stateOrigin=it.getEventPoint(t,this.svg).matrixTransform(this.firstEventCTM.inverse()))};P.prototype.handleMouseMove=function(t){if(this.options.preventMouseEventsDefault&&(t.preventDefault?t.preventDefault():t.returnValue=!1),this.state==="pan"&&this.options.panEnabled){var e=it.getEventPoint(t,this.svg).matrixTransform(this.firstEventCTM.inverse()),n=this.firstEventCTM.translate(e.x-this.stateOrigin.x,e.y-this.stateOrigin.y);this.viewport.setCTM(n)}};P.prototype.handleMouseUp=function(t){this.options.preventMouseEventsDefault&&(t.preventDefault?t.preventDefault():t.returnValue=!1),this.state==="pan"&&(this.state="none")};P.prototype.fit=function(){var t=this.viewport.getViewBox(),e=Math.min(this.width/t.width,this.height/t.height);this.zoom(e,!0)};P.prototype.contain=function(){var t=this.viewport.getViewBox(),e=Math.max(this.width/t.width,this.height/t.height);this.zoom(e,!0)};P.prototype.center=function(){var t=this.viewport.getViewBox(),e=(this.width-(t.width+t.x*2)*this.getZoom())*.5,n=(this.height-(t.height+t.y*2)*this.getZoom())*.5;this.getPublicInstance().pan({x:e,y:n})};P.prototype.updateBBox=function(){this.viewport.simpleViewBoxCache()};P.prototype.pan=function(t){var e=this.viewport.getCTM();e.e=t.x,e.f=t.y,this.viewport.setCTM(e)};P.prototype.panBy=function(t){var e=this.viewport.getCTM();e.e+=t.x,e.f+=t.y,this.viewport.setCTM(e)};P.prototype.getPan=function(){var t=this.viewport.getState();return{x:t.x,y:t.y}};P.prototype.resize=function(){var t=it.getBoundingClientRectNormalized(this.svg);this.width=t.width,this.height=t.height;var e=this.viewport;e.options.width=this.width,e.options.height=this.height,e.processCTM(),this.options.controlIconsEnabled&&(this.getPublicInstance().disableControlIcons(),this.getPublicInstance().enableControlIcons())};P.prototype.destroy=function(){var t=this;this.beforeZoom=null,this.onZoom=null,this.beforePan=null,this.onPan=null,this.onUpdatedCTM=null,this.options.customEventsHandler!=null&&this.options.customEventsHandler.destroy({svgElement:this.svg,eventsListenerElement:this.options.eventsListenerElement,instance:this.getPublicInstance()});for(var e in this.eventListeners)(this.options.eventsListenerElement||this.svg).removeEventListener(e,this.eventListeners[e],this.options.preventMouseEventsDefault?!1:hn);this.disableMouseWheelZoom(),this.getPublicInstance().disableControlIcons(),this.reset(),ht=ht.filter(function(n){return n.svg!==t.svg}),delete this.options,delete this.viewport,delete this.publicInstance,delete this.pi,this.getPublicInstance=function(){return null}};P.prototype.getPublicInstance=function(){var t=this;return this.publicInstance||(this.publicInstance=this.pi={enablePan:function(){return t.options.panEnabled=!0,t.pi},disablePan:function(){return t.options.panEnabled=!1,t.pi},isPanEnabled:function(){return!!t.options.panEnabled},pan:function(e){return t.pan(e),t.pi},panBy:function(e){return t.panBy(e),t.pi},getPan:function(){return t.getPan()},setBeforePan:function(e){return t.options.beforePan=e===null?null:nt.proxy(e,t.publicInstance),t.pi},setOnPan:function(e){return t.options.onPan=e===null?null:nt.proxy(e,t.publicInstance),t.pi},enableZoom:function(){return t.options.zoomEnabled=!0,t.pi},disableZoom:function(){return t.options.zoomEnabled=!1,t.pi},isZoomEnabled:function(){return!!t.options.zoomEnabled},enableControlIcons:function(){return t.options.controlIconsEnabled||(t.options.controlIconsEnabled=!0,oe.enable(t)),t.pi},disableControlIcons:function(){return t.options.controlIconsEnabled&&(t.options.controlIconsEnabled=!1,oe.disable(t)),t.pi},isControlIconsEnabled:function(){return!!t.options.controlIconsEnabled},enableDblClickZoom:function(){return t.options.dblClickZoomEnabled=!0,t.pi},disableDblClickZoom:function(){return t.options.dblClickZoomEnabled=!1,t.pi},isDblClickZoomEnabled:function(){return!!t.options.dblClickZoomEnabled},enableMouseWheelZoom:function(){return t.enableMouseWheelZoom(),t.pi},disableMouseWheelZoom:function(){return t.disableMouseWheelZoom(),t.pi},isMouseWheelZoomEnabled:function(){return!!t.options.mouseWheelZoomEnabled},setZoomScaleSensitivity:function(e){return t.options.zoomScaleSensitivity=e,t.pi},setMinZoom:function(e){return t.options.minZoom=e,t.pi},setMaxZoom:function(e){return t.options.maxZoom=e,t.pi},setBeforeZoom:function(e){return t.options.beforeZoom=e===null?null:nt.proxy(e,t.publicInstance),t.pi},setOnZoom:function(e){return t.options.onZoom=e===null?null:nt.proxy(e,t.publicInstance),t.pi},zoom:function(e){return t.publicZoom(e,!0),t.pi},zoomBy:function(e){return t.publicZoom(e,!1),t.pi},zoomAtPoint:function(e,n){return t.publicZoomAtPoint(e,n,!0),t.pi},zoomAtPointBy:function(e,n){return t.publicZoomAtPoint(e,n,!1),t.pi},zoomIn:function(){return this.zoomBy(1+t.options.zoomScaleSensitivity),t.pi},zoomOut:function(){return this.zoomBy(1/(1+t.options.zoomScaleSensitivity)),t.pi},getZoom:function(){return t.getRelativeZoom()},setOnUpdatedCTM:function(e){return t.options.onUpdatedCTM=e===null?null:nt.proxy(e,t.publicInstance),t.pi},resetZoom:function(){return t.resetZoom(),t.pi},resetPan:function(){return t.resetPan(),t.pi},reset:function(){return t.reset(),t.pi},fit:function(){return t.fit(),t.pi},contain:function(){return t.contain(),t.pi},center:function(){return t.center(),t.pi},updateBBox:function(){return t.updateBBox(),t.pi},resize:function(){return t.resize(),t.pi},getSizes:function(){return{width:t.width,height:t.height,realZoom:t.getZoom(),viewBox:t.viewport.getViewBox()}},destroy:function(){return t.destroy(),t.pi}}),this.publicInstance};var ht=[],ur=function(t,e){var n=nt.getSvg(t);if(n===null)return null;for(var r=ht.length-1;r>=0;r--)if(ht[r].svg===n)return ht[r].instance.getPublicInstance();return ht.push({svg:n,instance:new P(n,e)}),ht[ht.length-1].instance.getPublicInstance()},hr=ur;const cr=Bn(hr);class fr{constructor(){ut(this,"pan");ut(this,"zoom");ut(this,"pzoom");ut(this,"isDirty",!1);ut(this,"resizeObserver");ut(this,"isPanEnabled");ut(this,"onPanZoomChange");this.isPanEnabled=!0,this.resizeObserver=new ResizeObserver(()=>{this.resize(),this.isDirty||this.reset()})}updateElement(e,{pan:n,zoom:r}){this.pzoom=cr(e,{center:!0,controlIconsEnabled:!1,fit:!0,maxZoom:12,minZoom:.2,onPan:s=>{var i,a;this.pan=s,this.zoom=(i=this.pzoom)==null?void 0:i.getZoom(),this.isDirty=!0,this.zoom&&((a=this.onPanZoomChange)==null||a.call(this,this.pan,this.zoom))},onZoom:s=>{var i,a;this.zoom=s,this.pan=(i=this.pzoom)==null?void 0:i.getPan(),this.isDirty=!0,this.pan&&((a=this.onPanZoomChange)==null||a.call(this,this.pan,this.zoom))},panEnabled:!0,zoomEnabled:!0}),this.pzoom.disableDblClickZoom(),this.resizeObserver.disconnect(),this.resizeObserver.observe(e),n&&r&&Number.isFinite(r)&&Number.isFinite(n.x)&&Number.isFinite(n.y)?this.restorePanZoom(n,r):this.reset(),this.isPanEnabled?(this.pzoom.enablePan(),this.pzoom.enableZoom()):(this.pzoom.disableZoom(),this.pzoom.disablePan()),n===void 0&&r===void 0&&this.reset()}restorePanZoom(e,n){if(!this.pzoom){console.error("PanZoomState.restorePanZoom: pzoom is not initialized");return}this.pzoom.zoom(n),this.pzoom.pan(e)}resize(){var e;(e=this.pzoom)==null||e.resize(),this.isDirty||this.reset()}zoomIn(){var e;(e=this.pzoom)==null||e.zoomIn()}zoomOut(){var e;(e=this.pzoom)==null||e.zoomOut()}reset(){var e,n;(e=this.pzoom)==null||e.reset(),(n=this.pzoom)==null||n.zoom(.875),this.isDirty=!1}}function ae(t,e,n){if(t&&t.length){const[r,s]=e,i=Math.PI/180*n,a=Math.cos(i),o=Math.sin(i);for(const l of t){const[u,h]=l;l[0]=(u-r)*a-(h-s)*o+r,l[1]=(u-r)*o+(h-s)*a+s}}}function pr(t,e,n){const r=[];t.forEach(s=>r.push(...s)),ae(r,e,n)}function dr(t,e){return t[0]===e[0]&&t[1]===e[1]}function mr(t,e,n,r=1){const s=n,i=Math.max(e,.1),a=t[0]&&t[0][0]&&typeof t[0][0]=="number"?[t]:t,o=[0,0];if(s)for(const u of a)ae(u,o,s);const l=gr(a,i,r);if(s){for(const u of a)ae(u,o,-s);pr(l,o,-s)}return l}function gr(t,e,n){const r=[];for(const u of t){const h=[...u];dr(h[0],h[h.length-1])||h.push([h[0][0],h[0][1]]),h.length>2&&r.push(h)}const s=[];e=Math.max(e,.1);const i=[];for(const u of r)for(let h=0;h<u.length-1;h++){const c=u[h],f=u[h+1];if(c[1]!==f[1]){const p=Math.min(c[1],f[1]);i.push({ymin:p,ymax:Math.max(c[1],f[1]),x:p===c[1]?c[0]:f[0],islope:(f[0]-c[0])/(f[1]-c[1])})}}if(i.sort((u,h)=>u.ymin<h.ymin?-1:u.ymin>h.ymin?1:u.x<h.x?-1:u.x>h.x?1:u.ymax===h.ymax?0:(u.ymax-h.ymax)/Math.abs(u.ymax-h.ymax)),!i.length)return s;let a=[],o=i[0].ymin,l=0;for(;a.length||i.length;){if(i.length){let u=-1;for(let c=0;c<i.length&&!(i[c].ymin>o);c++)u=c;i.splice(0,u+1).forEach(c=>{a.push({s:o,edge:c})})}if(a=a.filter(u=>!(u.edge.ymax<=o)),a.sort((u,h)=>u.edge.x===h.edge.x?0:(u.edge.x-h.edge.x)/Math.abs(u.edge.x-h.edge.x)),(n!==1||l%e===0)&&a.length>1)for(let u=0;u<a.length;u=u+2){const h=u+1;if(h>=a.length)break;const c=a[u].edge,f=a[h].edge;s.push([[Math.round(c.x),o],[Math.round(f.x),o]])}o+=n,a.forEach(u=>{u.edge.x=u.edge.x+n*u.edge.islope}),l++}return s}function Pt(t,e){var n;const r=e.hachureAngle+90;let s=e.hachureGap;s<0&&(s=e.strokeWidth*4),s=Math.round(Math.max(s,.1));let i=1;return e.roughness>=1&&(((n=e.randomizer)===null||n===void 0?void 0:n.next())||Math.random())>.7&&(i=s),mr(t,s,r,i||1)}class ve{constructor(e){this.helper=e}fillPolygons(e,n){return this._fillPolygons(e,n)}_fillPolygons(e,n){const r=Pt(e,n);return{type:"fillSketch",ops:this.renderLines(r,n)}}renderLines(e,n){const r=[];for(const s of e)r.push(...this.helper.doubleLineOps(s[0][0],s[0][1],s[1][0],s[1][1],n));return r}}function jt(t){const e=t[0],n=t[1];return Math.sqrt(Math.pow(e[0]-n[0],2)+Math.pow(e[1]-n[1],2))}class vr extends ve{fillPolygons(e,n){let r=n.hachureGap;r<0&&(r=n.strokeWidth*4),r=Math.max(r,.1);const s=Object.assign({},n,{hachureGap:r}),i=Pt(e,s),a=Math.PI/180*n.hachureAngle,o=[],l=r*.5*Math.cos(a),u=r*.5*Math.sin(a);for(const[c,f]of i)jt([c,f])&&o.push([[c[0]-l,c[1]+u],[...f]],[[c[0]+l,c[1]-u],[...f]]);return{type:"fillSketch",ops:this.renderLines(o,n)}}}class br extends ve{fillPolygons(e,n){const r=this._fillPolygons(e,n),s=Object.assign({},n,{hachureAngle:n.hachureAngle+90}),i=this._fillPolygons(e,s);return r.ops=r.ops.concat(i.ops),r}}class yr{constructor(e){this.helper=e}fillPolygons(e,n){n=Object.assign({},n,{hachureAngle:0});const r=Pt(e,n);return this.dotsOnLines(r,n)}dotsOnLines(e,n){const r=[];let s=n.hachureGap;s<0&&(s=n.strokeWidth*4),s=Math.max(s,.1);let i=n.fillWeight;i<0&&(i=n.strokeWidth/2);const a=s/4;for(const o of e){const l=jt(o),u=l/s,h=Math.ceil(u)-1,c=l-h*s,f=(o[0][0]+o[1][0])/2-s/4,p=Math.min(o[0][1],o[1][1]);for(let d=0;d<h;d++){const m=p+c+d*s,g=f-a+Math.random()*2*a,v=m-a+Math.random()*2*a,y=this.helper.ellipse(g,v,i,i,n);r.push(...y.ops)}}return{type:"fillSketch",ops:r}}}class xr{constructor(e){this.helper=e}fillPolygons(e,n){const r=Pt(e,n);return{type:"fillSketch",ops:this.dashedLine(r,n)}}dashedLine(e,n){const r=n.dashOffset<0?n.hachureGap<0?n.strokeWidth*4:n.hachureGap:n.dashOffset,s=n.dashGap<0?n.hachureGap<0?n.strokeWidth*4:n.hachureGap:n.dashGap,i=[];return e.forEach(a=>{const o=jt(a),l=Math.floor(o/(r+s)),u=(o+s-l*(r+s))/2;let h=a[0],c=a[1];h[0]>c[0]&&(h=a[1],c=a[0]);const f=Math.atan((c[1]-h[1])/(c[0]-h[0]));for(let p=0;p<l;p++){const d=p*(r+s),m=d+r,g=[h[0]+d*Math.cos(f)+u*Math.cos(f),h[1]+d*Math.sin(f)+u*Math.sin(f)],v=[h[0]+m*Math.cos(f)+u*Math.cos(f),h[1]+m*Math.sin(f)+u*Math.sin(f)];i.push(...this.helper.doubleLineOps(g[0],g[1],v[0],v[1],n))}}),i}}class wr{constructor(e){this.helper=e}fillPolygons(e,n){const r=n.hachureGap<0?n.strokeWidth*4:n.hachureGap,s=n.zigzagOffset<0?r:n.zigzagOffset;n=Object.assign({},n,{hachureGap:r+s});const i=Pt(e,n);return{type:"fillSketch",ops:this.zigzagLines(i,s,n)}}zigzagLines(e,n,r){const s=[];return e.forEach(i=>{const a=jt(i),o=Math.round(a/(2*n));let l=i[0],u=i[1];l[0]>u[0]&&(l=i[1],u=i[0]);const h=Math.atan((u[1]-l[1])/(u[0]-l[0]));for(let c=0;c<o;c++){const f=c*2*n,p=(c+1)*2*n,d=Math.sqrt(2*Math.pow(n,2)),m=[l[0]+f*Math.cos(h),l[1]+f*Math.sin(h)],g=[l[0]+p*Math.cos(h),l[1]+p*Math.sin(h)],v=[m[0]+d*Math.cos(h+Math.PI/4),m[1]+d*Math.sin(h+Math.PI/4)];s.push(...this.helper.doubleLineOps(m[0],m[1],v[0],v[1],r),...this.helper.doubleLineOps(v[0],v[1],g[0],g[1],r))}}),s}}const W={};function Mr(t,e){let n=t.fillStyle||"hachure";if(!W[n])switch(n){case"zigzag":W[n]||(W[n]=new vr(e));break;case"cross-hatch":W[n]||(W[n]=new br(e));break;case"dots":W[n]||(W[n]=new yr(e));break;case"dashed":W[n]||(W[n]=new xr(e));break;case"zigzag-line":W[n]||(W[n]=new wr(e));break;case"hachure":default:n="hachure",W[n]||(W[n]=new ve(e));break}return W[n]}function Sr(){return Math.floor(Math.random()*2**31)}class cn{constructor(e){this.seed=e}next(){return this.seed?(2**31-1&(this.seed=Math.imul(48271,this.seed)))/2**31:Math.random()}}const Ar=0,le=1,fn=2,Vt={A:7,a:7,C:6,c:6,H:1,h:1,L:2,l:2,M:2,m:2,Q:4,q:4,S:4,s:4,T:2,t:2,V:1,v:1,Z:0,z:0};function Er(t){const e=new Array;for(;t!=="";)if(t.match(/^([ \t\r\n,]+)/))t=t.substr(RegExp.$1.length);else if(t.match(/^([aAcChHlLmMqQsStTvVzZ])/))e[e.length]={type:Ar,text:RegExp.$1},t=t.substr(RegExp.$1.length);else if(t.match(/^(([-+]?[0-9]+(\.[0-9]*)?|[-+]?\.[0-9]+)([eE][-+]?[0-9]+)?)/))e[e.length]={type:le,text:`${parseFloat(RegExp.$1)}`},t=t.substr(RegExp.$1.length);else return[];return e[e.length]={type:fn,text:""},e}function Kt(t,e){return t.type===e}function be(t){const e=[],n=Er(t);let r="BOD",s=0,i=n[s];for(;!Kt(i,fn);){let a=0;const o=[];if(r==="BOD")if(i.text==="M"||i.text==="m")s++,a=Vt[i.text],r=i.text;else return be("M0,0"+t);else Kt(i,le)?a=Vt[r]:(s++,a=Vt[i.text],r=i.text);if(s+a<n.length){for(let l=s;l<s+a;l++){const u=n[l];if(Kt(u,le))o[o.length]=+u.text;else throw new Error("Param not a number: "+r+","+u.text)}if(typeof Vt[r]=="number"){const l={key:r,data:o};e.push(l),s+=a,i=n[s],r==="M"&&(r="L"),r==="m"&&(r="l")}else throw new Error("Bad segment: "+r)}else throw new Error("Path data ended short")}return e}function pn(t){let e=0,n=0,r=0,s=0;const i=[];for(const{key:a,data:o}of t)switch(a){case"M":i.push({key:"M",data:[...o]}),[e,n]=o,[r,s]=o;break;case"m":e+=o[0],n+=o[1],i.push({key:"M",data:[e,n]}),r=e,s=n;break;case"L":i.push({key:"L",data:[...o]}),[e,n]=o;break;case"l":e+=o[0],n+=o[1],i.push({key:"L",data:[e,n]});break;case"C":i.push({key:"C",data:[...o]}),e=o[4],n=o[5];break;case"c":{const l=o.map((u,h)=>h%2?u+n:u+e);i.push({key:"C",data:l}),e=l[4],n=l[5];break}case"Q":i.push({key:"Q",data:[...o]}),e=o[2],n=o[3];break;case"q":{const l=o.map((u,h)=>h%2?u+n:u+e);i.push({key:"Q",data:l}),e=l[2],n=l[3];break}case"A":i.push({key:"A",data:[...o]}),e=o[5],n=o[6];break;case"a":e+=o[5],n+=o[6],i.push({key:"A",data:[o[0],o[1],o[2],o[3],o[4],e,n]});break;case"H":i.push({key:"H",data:[...o]}),e=o[0];break;case"h":e+=o[0],i.push({key:"H",data:[e]});break;case"V":i.push({key:"V",data:[...o]}),n=o[0];break;case"v":n+=o[0],i.push({key:"V",data:[n]});break;case"S":i.push({key:"S",data:[...o]}),e=o[2],n=o[3];break;case"s":{const l=o.map((u,h)=>h%2?u+n:u+e);i.push({key:"S",data:l}),e=l[2],n=l[3];break}case"T":i.push({key:"T",data:[...o]}),e=o[0],n=o[1];break;case"t":e+=o[0],n+=o[1],i.push({key:"T",data:[e,n]});break;case"Z":case"z":i.push({key:"Z",data:[]}),e=r,n=s;break}return i}function dn(t){const e=[];let n="",r=0,s=0,i=0,a=0,o=0,l=0;for(const{key:u,data:h}of t){switch(u){case"M":e.push({key:"M",data:[...h]}),[r,s]=h,[i,a]=h;break;case"C":e.push({key:"C",data:[...h]}),r=h[4],s=h[5],o=h[2],l=h[3];break;case"L":e.push({key:"L",data:[...h]}),[r,s]=h;break;case"H":r=h[0],e.push({key:"L",data:[r,s]});break;case"V":s=h[0],e.push({key:"L",data:[r,s]});break;case"S":{let c=0,f=0;n==="C"||n==="S"?(c=r+(r-o),f=s+(s-l)):(c=r,f=s),e.push({key:"C",data:[c,f,...h]}),o=h[0],l=h[1],r=h[2],s=h[3];break}case"T":{const[c,f]=h;let p=0,d=0;n==="Q"||n==="T"?(p=r+(r-o),d=s+(s-l)):(p=r,d=s);const m=r+2*(p-r)/3,g=s+2*(d-s)/3,v=c+2*(p-c)/3,y=f+2*(d-f)/3;e.push({key:"C",data:[m,g,v,y,c,f]}),o=p,l=d,r=c,s=f;break}case"Q":{const[c,f,p,d]=h,m=r+2*(c-r)/3,g=s+2*(f-s)/3,v=p+2*(c-p)/3,y=d+2*(f-d)/3;e.push({key:"C",data:[m,g,v,y,p,d]}),o=c,l=f,r=p,s=d;break}case"A":{const c=Math.abs(h[0]),f=Math.abs(h[1]),p=h[2],d=h[3],m=h[4],g=h[5],v=h[6];c===0||f===0?(e.push({key:"C",data:[r,s,g,v,g,v]}),r=g,s=v):(r!==g||s!==v)&&(mn(r,s,g,v,c,f,p,d,m).forEach(function(S){e.push({key:"C",data:S})}),r=g,s=v);break}case"Z":e.push({key:"Z",data:[]}),r=i,s=a;break}n=u}return e}function Cr(t){return Math.PI*t/180}function At(t,e,n){const r=t*Math.cos(n)-e*Math.sin(n),s=t*Math.sin(n)+e*Math.cos(n);return[r,s]}function mn(t,e,n,r,s,i,a,o,l,u){const h=Cr(a);let c=[],f=0,p=0,d=0,m=0;if(u)[f,p,d,m]=u;else{[t,e]=At(t,e,-h),[n,r]=At(n,r,-h);const k=(t-n)/2,T=(e-r)/2;let z=k*k/(s*s)+T*T/(i*i);z>1&&(z=Math.sqrt(z),s=z*s,i=z*i);const F=o===l?-1:1,H=s*s,D=i*i,q=H*D-H*T*T-D*k*k,N=H*T*T+D*k*k,I=F*Math.sqrt(Math.abs(q/N));d=I*s*T/i+(t+n)/2,m=I*-i*k/s+(e+r)/2,f=Math.asin(parseFloat(((e-m)/i).toFixed(9))),p=Math.asin(parseFloat(((r-m)/i).toFixed(9))),t<d&&(f=Math.PI-f),n<d&&(p=Math.PI-p),f<0&&(f=Math.PI*2+f),p<0&&(p=Math.PI*2+p),l&&f>p&&(f=f-Math.PI*2),!l&&p>f&&(p=p-Math.PI*2)}let g=p-f;if(Math.abs(g)>Math.PI*120/180){const k=p,T=n,z=r;l&&p>f?p=f+Math.PI*120/180*1:p=f+Math.PI*120/180*-1,n=d+s*Math.cos(p),r=m+i*Math.sin(p),c=mn(n,r,T,z,s,i,a,0,l,[p,k,d,m])}g=p-f;const v=Math.cos(f),y=Math.sin(f),S=Math.cos(p),M=Math.sin(p),w=Math.tan(g/4),E=4/3*s*w,_=4/3*i*w,V=[t,e],R=[t+E*y,e-_*v],U=[n+E*M,r-_*S],B=[n,r];if(R[0]=2*V[0]-R[0],R[1]=2*V[1]-R[1],u)return[R,U,B].concat(c);{c=[R,U,B].concat(c);const k=[];for(let T=0;T<c.length;T+=3){const z=At(c[T][0],c[T][1],h),F=At(c[T+1][0],c[T+1][1],h),H=At(c[T+2][0],c[T+2][1],h);k.push([z[0],z[1],F[0],F[1],H[0],H[1]])}return k}}const _r={randOffset:Pr,randOffsetWithRange:Vr,ellipse:kr,doubleLineOps:Rr};function gn(t,e,n,r,s){return{type:"path",ops:gt(t,e,n,r,s)}}function Ft(t,e,n){const r=(t||[]).length;if(r>2){const s=[];for(let i=0;i<r-1;i++)s.push(...gt(t[i][0],t[i][1],t[i+1][0],t[i+1][1],n));return e&&s.push(...gt(t[r-1][0],t[r-1][1],t[0][0],t[0][1],n)),{type:"path",ops:s}}else if(r===2)return gn(t[0][0],t[0][1],t[1][0],t[1][1],n);return{type:"path",ops:[]}}function Or(t,e){return Ft(t,!0,e)}function Tr(t,e,n,r,s){const i=[[t,e],[t+n,e],[t+n,e+r],[t,e+r]];return Or(i,s)}function Te(t,e){if(t.length){const r=typeof t[0][0]=="number"?[t]:t,s=Rt(r[0],1*(1+e.roughness*.2),e),i=e.disableMultiStroke?[]:Rt(r[0],1.5*(1+e.roughness*.22),Pe(e));for(let a=1;a<r.length;a++){const o=r[a];if(o.length){const l=Rt(o,1*(1+e.roughness*.2),e),u=e.disableMultiStroke?[]:Rt(o,1.5*(1+e.roughness*.22),Pe(e));for(const h of l)h.op!=="move"&&s.push(h);for(const h of u)h.op!=="move"&&i.push(h)}}return{type:"path",ops:s.concat(i)}}return{type:"path",ops:[]}}function kr(t,e,n,r,s){const i=vn(n,r,s);return ue(t,e,s,i).opset}function vn(t,e,n){const r=Math.sqrt(Math.PI*2*Math.sqrt((Math.pow(t/2,2)+Math.pow(e/2,2))/2)),s=Math.ceil(Math.max(n.curveStepCount,n.curveStepCount/Math.sqrt(200)*r)),i=Math.PI*2/s;let a=Math.abs(t/2),o=Math.abs(e/2);const l=1-n.curveFitting;return a+=A(a*l,n),o+=A(o*l,n),{increment:i,rx:a,ry:o}}function ue(t,e,n,r){const[s,i]=Ve(r.increment,t,e,r.rx,r.ry,1,r.increment*$t(.1,$t(.4,1,n),n),n);let a=Bt(s,null,n);if(!n.disableMultiStroke&&n.roughness!==0){const[o]=Ve(r.increment,t,e,r.rx,r.ry,1.5,0,n),l=Bt(o,null,n);a=a.concat(l)}return{estimatedPoints:i,opset:{type:"path",ops:a}}}function ke(t,e,n,r,s,i,a,o,l){const u=t,h=e;let c=Math.abs(n/2),f=Math.abs(r/2);c+=A(c*.01,l),f+=A(f*.01,l);let p=s,d=i;for(;p<0;)p+=Math.PI*2,d+=Math.PI*2;d-p>Math.PI*2&&(p=0,d=Math.PI*2);const m=Math.PI*2/l.curveStepCount,g=Math.min(m/2,(d-p)/2),v=Re(g,u,h,c,f,p,d,1,l);if(!l.disableMultiStroke){const y=Re(g,u,h,c,f,p,d,1.5,l);v.push(...y)}return a&&(o?v.push(...gt(u,h,u+c*Math.cos(p),h+f*Math.sin(p),l),...gt(u,h,u+c*Math.cos(d),h+f*Math.sin(d),l)):v.push({op:"lineTo",data:[u,h]},{op:"lineTo",data:[u+c*Math.cos(p),h+f*Math.sin(p)]})),{type:"path",ops:v}}function Ne(t,e){const n=dn(pn(be(t))),r=[];let s=[0,0],i=[0,0];for(const{key:a,data:o}of n)switch(a){case"M":{i=[o[0],o[1]],s=[o[0],o[1]];break}case"L":r.push(...gt(i[0],i[1],o[0],o[1],e)),i=[o[0],o[1]];break;case"C":{const[l,u,h,c,f,p]=o;r.push(...zr(l,u,h,c,f,p,i,e)),i=[f,p];break}case"Z":r.push(...gt(i[0],i[1],s[0],s[1],e)),i=[s[0],s[1]];break}return{type:"path",ops:r}}function Jt(t,e){const n=[];for(const r of t)if(r.length){const s=e.maxRandomnessOffset||0,i=r.length;if(i>2){n.push({op:"move",data:[r[0][0]+A(s,e),r[0][1]+A(s,e)]});for(let a=1;a<i;a++)n.push({op:"lineTo",data:[r[a][0]+A(s,e),r[a][1]+A(s,e)]})}}return{type:"fillPath",ops:n}}function wt(t,e){return Mr(e,_r).fillPolygons(t,e)}function Nr(t,e,n,r,s,i,a){const o=t,l=e;let u=Math.abs(n/2),h=Math.abs(r/2);u+=A(u*.01,a),h+=A(h*.01,a);let c=s,f=i;for(;c<0;)c+=Math.PI*2,f+=Math.PI*2;f-c>Math.PI*2&&(c=0,f=Math.PI*2);const p=(f-c)/a.curveStepCount,d=[];for(let m=c;m<=f;m=m+p)d.push([o+u*Math.cos(m),l+h*Math.sin(m)]);return d.push([o+u*Math.cos(f),l+h*Math.sin(f)]),d.push([o,l]),wt([d],a)}function Pr(t,e){return A(t,e)}function Vr(t,e,n){return $t(t,e,n)}function Rr(t,e,n,r,s){return gt(t,e,n,r,s,!0)}function Pe(t){const e=Object.assign({},t);return e.randomizer=void 0,t.seed&&(e.seed=t.seed+1),e}function bn(t){return t.randomizer||(t.randomizer=new cn(t.seed||0)),t.randomizer.next()}function $t(t,e,n,r=1){return n.roughness*r*(bn(n)*(e-t)+t)}function A(t,e,n=1){return $t(-t,t,e,n)}function gt(t,e,n,r,s,i=!1){const a=i?s.disableMultiStrokeFill:s.disableMultiStroke,o=he(t,e,n,r,s,!0,!1);if(a)return o;const l=he(t,e,n,r,s,!0,!0);return o.concat(l)}function he(t,e,n,r,s,i,a){const o=Math.pow(t-n,2)+Math.pow(e-r,2),l=Math.sqrt(o);let u=1;l<200?u=1:l>500?u=.4:u=-.0016668*l+1.233334;let h=s.maxRandomnessOffset||0;h*h*100>o&&(h=l/10);const c=h/2,f=.2+bn(s)*.2;let p=s.bowing*s.maxRandomnessOffset*(r-e)/200,d=s.bowing*s.maxRandomnessOffset*(t-n)/200;p=A(p,s,u),d=A(d,s,u);const m=[],g=()=>A(c,s,u),v=()=>A(h,s,u),y=s.preserveVertices;return a?m.push({op:"move",data:[t+(y?0:g()),e+(y?0:g())]}):m.push({op:"move",data:[t+(y?0:A(h,s,u)),e+(y?0:A(h,s,u))]}),a?m.push({op:"bcurveTo",data:[p+t+(n-t)*f+g(),d+e+(r-e)*f+g(),p+t+2*(n-t)*f+g(),d+e+2*(r-e)*f+g(),n+(y?0:g()),r+(y?0:g())]}):m.push({op:"bcurveTo",data:[p+t+(n-t)*f+v(),d+e+(r-e)*f+v(),p+t+2*(n-t)*f+v(),d+e+2*(r-e)*f+v(),n+(y?0:v()),r+(y?0:v())]}),m}function Rt(t,e,n){if(!t.length)return[];const r=[];r.push([t[0][0]+A(e,n),t[0][1]+A(e,n)]),r.push([t[0][0]+A(e,n),t[0][1]+A(e,n)]);for(let s=1;s<t.length;s++)r.push([t[s][0]+A(e,n),t[s][1]+A(e,n)]),s===t.length-1&&r.push([t[s][0]+A(e,n),t[s][1]+A(e,n)]);return Bt(r,null,n)}function Bt(t,e,n){const r=t.length,s=[];if(r>3){const i=[],a=1-n.curveTightness;s.push({op:"move",data:[t[1][0],t[1][1]]});for(let o=1;o+2<r;o++){const l=t[o];i[0]=[l[0],l[1]],i[1]=[l[0]+(a*t[o+1][0]-a*t[o-1][0])/6,l[1]+(a*t[o+1][1]-a*t[o-1][1])/6],i[2]=[t[o+1][0]+(a*t[o][0]-a*t[o+2][0])/6,t[o+1][1]+(a*t[o][1]-a*t[o+2][1])/6],i[3]=[t[o+1][0],t[o+1][1]],s.push({op:"bcurveTo",data:[i[1][0],i[1][1],i[2][0],i[2][1],i[3][0],i[3][1]]})}}else r===3?(s.push({op:"move",data:[t[1][0],t[1][1]]}),s.push({op:"bcurveTo",data:[t[1][0],t[1][1],t[2][0],t[2][1],t[2][0],t[2][1]]})):r===2&&s.push(...he(t[0][0],t[0][1],t[1][0],t[1][1],n,!0,!0));return s}function Ve(t,e,n,r,s,i,a,o){const l=o.roughness===0,u=[],h=[];if(l){t=t/4,h.push([e+r*Math.cos(-t),n+s*Math.sin(-t)]);for(let c=0;c<=Math.PI*2;c=c+t){const f=[e+r*Math.cos(c),n+s*Math.sin(c)];u.push(f),h.push(f)}h.push([e+r*Math.cos(0),n+s*Math.sin(0)]),h.push([e+r*Math.cos(t),n+s*Math.sin(t)])}else{const c=A(.5,o)-Math.PI/2;h.push([A(i,o)+e+.9*r*Math.cos(c-t),A(i,o)+n+.9*s*Math.sin(c-t)]);const f=Math.PI*2+c-.01;for(let p=c;p<f;p=p+t){const d=[A(i,o)+e+r*Math.cos(p),A(i,o)+n+s*Math.sin(p)];u.push(d),h.push(d)}h.push([A(i,o)+e+r*Math.cos(c+Math.PI*2+a*.5),A(i,o)+n+s*Math.sin(c+Math.PI*2+a*.5)]),h.push([A(i,o)+e+.98*r*Math.cos(c+a),A(i,o)+n+.98*s*Math.sin(c+a)]),h.push([A(i,o)+e+.9*r*Math.cos(c+a*.5),A(i,o)+n+.9*s*Math.sin(c+a*.5)])}return[h,u]}function Re(t,e,n,r,s,i,a,o,l){const u=i+A(.1,l),h=[];h.push([A(o,l)+e+.9*r*Math.cos(u-t),A(o,l)+n+.9*s*Math.sin(u-t)]);for(let c=u;c<=a;c=c+t)h.push([A(o,l)+e+r*Math.cos(c),A(o,l)+n+s*Math.sin(c)]);return h.push([e+r*Math.cos(a),n+s*Math.sin(a)]),h.push([e+r*Math.cos(a),n+s*Math.sin(a)]),Bt(h,null,l)}function zr(t,e,n,r,s,i,a,o){const l=[],u=[o.maxRandomnessOffset||1,(o.maxRandomnessOffset||1)+.3];let h=[0,0];const c=o.disableMultiStroke?1:2,f=o.preserveVertices;for(let p=0;p<c;p++)p===0?l.push({op:"move",data:[a[0],a[1]]}):l.push({op:"move",data:[a[0]+(f?0:A(u[0],o)),a[1]+(f?0:A(u[0],o))]}),h=f?[s,i]:[s+A(u[p],o),i+A(u[p],o)],l.push({op:"bcurveTo",data:[t+A(u[p],o),e+A(u[p],o),n+A(u[p],o),r+A(u[p],o),h[0],h[1]]});return l}function Et(t){return[...t]}function ze(t,e=0){const n=t.length;if(n<3)throw new Error("A curve must have at least three points.");const r=[];if(n===3)r.push(Et(t[0]),Et(t[1]),Et(t[2]),Et(t[2]));else{const s=[];s.push(t[0],t[0]);for(let o=1;o<t.length;o++)s.push(t[o]),o===t.length-1&&s.push(t[o]);const i=[],a=1-e;r.push(Et(s[0]));for(let o=1;o+2<s.length;o++){const l=s[o];i[0]=[l[0],l[1]],i[1]=[l[0]+(a*s[o+1][0]-a*s[o-1][0])/6,l[1]+(a*s[o+1][1]-a*s[o-1][1])/6],i[2]=[s[o+1][0]+(a*s[o][0]-a*s[o+2][0])/6,s[o+1][1]+(a*s[o][1]-a*s[o+2][1])/6],i[3]=[s[o+1][0],s[o+1][1]],r.push(i[1],i[2],i[3])}}return r}function Ir(t,e){return Math.sqrt(Ht(t,e))}function Ht(t,e){return Math.pow(t[0]-e[0],2)+Math.pow(t[1]-e[1],2)}function Lr(t,e,n){const r=Ht(e,n);if(r===0)return Ht(t,e);let s=((t[0]-e[0])*(n[0]-e[0])+(t[1]-e[1])*(n[1]-e[1]))/r;return s=Math.max(0,Math.min(1,s)),Ht(t,vt(e,n,s))}function vt(t,e,n){return[t[0]+(e[0]-t[0])*n,t[1]+(e[1]-t[1])*n]}function Dr(t,e){const n=t[e+0],r=t[e+1],s=t[e+2],i=t[e+3];let a=3*r[0]-2*n[0]-i[0];a*=a;let o=3*r[1]-2*n[1]-i[1];o*=o;let l=3*s[0]-2*i[0]-n[0];l*=l;let u=3*s[1]-2*i[1]-n[1];return u*=u,a<l&&(a=l),o<u&&(o=u),a+o}function ce(t,e,n,r){const s=r||[];if(Dr(t,e)<n){const i=t[e+0];s.length?Ir(s[s.length-1],i)>1&&s.push(i):s.push(i),s.push(t[e+3])}else{const a=t[e+0],o=t[e+1],l=t[e+2],u=t[e+3],h=vt(a,o,.5),c=vt(o,l,.5),f=vt(l,u,.5),p=vt(h,c,.5),d=vt(c,f,.5),m=vt(p,d,.5);ce([a,h,p,m],0,n,s),ce([m,d,f,u],0,n,s)}return s}function Zr(t,e){return Gt(t,0,t.length,e)}function Gt(t,e,n,r,s){const i=s||[],a=t[e],o=t[n-1];let l=0,u=1;for(let h=e+1;h<n-1;++h){const c=Lr(t[h],a,o);c>l&&(l=c,u=h)}return Math.sqrt(l)>r?(Gt(t,e,u+1,r,i),Gt(t,u,n,r,i)):(i.length||i.push(a),i.push(o)),i}function fe(t,e=.15,n){const r=[],s=(t.length-1)/3;for(let i=0;i<s;i++){const a=i*3;ce(t,a,e,r)}return n&&n>0?Gt(r,0,r.length,n):r}function Fr(t,e,n){const r=be(t),s=dn(pn(r)),i=[];let a=[],o=[0,0],l=[];const u=()=>{l.length>=4&&a.push(...fe(l,e)),l=[]},h=()=>{u(),a.length&&(i.push(a),a=[])};for(const{key:f,data:p}of s)switch(f){case"M":h(),o=[p[0],p[1]],a.push(o);break;case"L":u(),a.push([p[0],p[1]]);break;case"C":if(!l.length){const d=a.length?a[a.length-1]:o;l.push([d[0],d[1]])}l.push([p[0],p[1]]),l.push([p[2],p[3]]),l.push([p[4],p[5]]);break;case"Z":u(),a.push([o[0],o[1]]);break}if(h(),!n)return i;const c=[];for(const f of i){const p=Zr(f,n);p.length&&c.push(p)}return c}const X="none";class Ut{constructor(e){this.defaultOptions={maxRandomnessOffset:2,roughness:1,bowing:1,stroke:"#000",strokeWidth:1,curveTightness:0,curveFitting:.95,curveStepCount:9,fillStyle:"hachure",fillWeight:-1,hachureAngle:-41,hachureGap:-1,dashOffset:-1,dashGap:-1,zigzagOffset:-1,seed:0,disableMultiStroke:!1,disableMultiStrokeFill:!1,preserveVertices:!1,fillShapeRoughnessGain:.8},this.config=e||{},this.config.options&&(this.defaultOptions=this._o(this.config.options))}static newSeed(){return Sr()}_o(e){return e?Object.assign({},this.defaultOptions,e):this.defaultOptions}_d(e,n,r){return{shape:e,sets:n||[],options:r||this.defaultOptions}}line(e,n,r,s,i){const a=this._o(i);return this._d("line",[gn(e,n,r,s,a)],a)}rectangle(e,n,r,s,i){const a=this._o(i),o=[],l=Tr(e,n,r,s,a);if(a.fill){const u=[[e,n],[e+r,n],[e+r,n+s],[e,n+s]];a.fillStyle==="solid"?o.push(Jt([u],a)):o.push(wt([u],a))}return a.stroke!==X&&o.push(l),this._d("rectangle",o,a)}ellipse(e,n,r,s,i){const a=this._o(i),o=[],l=vn(r,s,a),u=ue(e,n,a,l);if(a.fill)if(a.fillStyle==="solid"){const h=ue(e,n,a,l).opset;h.type="fillPath",o.push(h)}else o.push(wt([u.estimatedPoints],a));return a.stroke!==X&&o.push(u.opset),this._d("ellipse",o,a)}circle(e,n,r,s){const i=this.ellipse(e,n,r,r,s);return i.shape="circle",i}linearPath(e,n){const r=this._o(n);return this._d("linearPath",[Ft(e,!1,r)],r)}arc(e,n,r,s,i,a,o=!1,l){const u=this._o(l),h=[],c=ke(e,n,r,s,i,a,o,!0,u);if(o&&u.fill)if(u.fillStyle==="solid"){const f=Object.assign({},u);f.disableMultiStroke=!0;const p=ke(e,n,r,s,i,a,!0,!1,f);p.type="fillPath",h.push(p)}else h.push(Nr(e,n,r,s,i,a,u));return u.stroke!==X&&h.push(c),this._d("arc",h,u)}curve(e,n){const r=this._o(n),s=[],i=Te(e,r);if(r.fill&&r.fill!==X)if(r.fillStyle==="solid"){const a=Te(e,Object.assign(Object.assign({},r),{disableMultiStroke:!0,roughness:r.roughness?r.roughness+r.fillShapeRoughnessGain:0}));s.push({type:"fillPath",ops:this._mergedShape(a.ops)})}else{const a=[],o=e;if(o.length){const u=typeof o[0][0]=="number"?[o]:o;for(const h of u)h.length<3?a.push(...h):h.length===3?a.push(...fe(ze([h[0],h[0],h[1],h[2]]),10,(1+r.roughness)/2)):a.push(...fe(ze(h),10,(1+r.roughness)/2))}a.length&&s.push(wt([a],r))}return r.stroke!==X&&s.push(i),this._d("curve",s,r)}polygon(e,n){const r=this._o(n),s=[],i=Ft(e,!0,r);return r.fill&&(r.fillStyle==="solid"?s.push(Jt([e],r)):s.push(wt([e],r))),r.stroke!==X&&s.push(i),this._d("polygon",s,r)}path(e,n){const r=this._o(n),s=[];if(!e)return this._d("path",s,r);e=(e||"").replace(/\n/g," ").replace(/(-\s)/g,"-").replace("/(ss)/g"," ");const i=r.fill&&r.fill!=="transparent"&&r.fill!==X,a=r.stroke!==X,o=!!(r.simplification&&r.simplification<1),l=o?4-4*(r.simplification||1):(1+r.roughness)/2,u=Fr(e,1,l),h=Ne(e,r);if(i)if(r.fillStyle==="solid")if(u.length===1){const c=Ne(e,Object.assign(Object.assign({},r),{disableMultiStroke:!0,roughness:r.roughness?r.roughness+r.fillShapeRoughnessGain:0}));s.push({type:"fillPath",ops:this._mergedShape(c.ops)})}else s.push(Jt(u,r));else s.push(wt(u,r));return a&&(o?u.forEach(c=>{s.push(Ft(c,!1,r))}):s.push(h)),this._d("path",s,r)}opsToPath(e,n){let r="";for(const s of e.ops){const i=typeof n=="number"&&n>=0?s.data.map(a=>+a.toFixed(n)):s.data;switch(s.op){case"move":r+=`M${i[0]} ${i[1]} `;break;case"bcurveTo":r+=`C${i[0]} ${i[1]}, ${i[2]} ${i[3]}, ${i[4]} ${i[5]} `;break;case"lineTo":r+=`L${i[0]} ${i[1]} `;break}}return r.trim()}toPaths(e){const n=e.sets||[],r=e.options||this.defaultOptions,s=[];for(const i of n){let a=null;switch(i.type){case"path":a={d:this.opsToPath(i),stroke:r.stroke,strokeWidth:r.strokeWidth,fill:X};break;case"fillPath":a={d:this.opsToPath(i),stroke:X,strokeWidth:0,fill:r.fill||X};break;case"fillSketch":a=this.fillSketch(i,r);break}a&&s.push(a)}return s}fillSketch(e,n){let r=n.fillWeight;return r<0&&(r=n.strokeWidth/2),{d:this.opsToPath(e),stroke:n.fill||X,strokeWidth:r,fill:X}}_mergedShape(e){return e.filter((n,r)=>r===0?!0:n.op!=="move")}}class Hr{constructor(e,n){this.canvas=e,this.ctx=this.canvas.getContext("2d"),this.gen=new Ut(n)}draw(e){const n=e.sets||[],r=e.options||this.getDefaultOptions(),s=this.ctx,i=e.options.fixedDecimalPlaceDigits;for(const a of n)switch(a.type){case"path":s.save(),s.strokeStyle=r.stroke==="none"?"transparent":r.stroke,s.lineWidth=r.strokeWidth,r.strokeLineDash&&s.setLineDash(r.strokeLineDash),r.strokeLineDashOffset&&(s.lineDashOffset=r.strokeLineDashOffset),this._drawToContext(s,a,i),s.restore();break;case"fillPath":{s.save(),s.fillStyle=r.fill||"";const o=e.shape==="curve"||e.shape==="polygon"||e.shape==="path"?"evenodd":"nonzero";this._drawToContext(s,a,i,o),s.restore();break}case"fillSketch":this.fillSketch(s,a,r);break}}fillSketch(e,n,r){let s=r.fillWeight;s<0&&(s=r.strokeWidth/2),e.save(),r.fillLineDash&&e.setLineDash(r.fillLineDash),r.fillLineDashOffset&&(e.lineDashOffset=r.fillLineDashOffset),e.strokeStyle=r.fill||"",e.lineWidth=s,this._drawToContext(e,n,r.fixedDecimalPlaceDigits),e.restore()}_drawToContext(e,n,r,s="nonzero"){e.beginPath();for(const i of n.ops){const a=typeof r=="number"&&r>=0?i.data.map(o=>+o.toFixed(r)):i.data;switch(i.op){case"move":e.moveTo(a[0],a[1]);break;case"bcurveTo":e.bezierCurveTo(a[0],a[1],a[2],a[3],a[4],a[5]);break;case"lineTo":e.lineTo(a[0],a[1]);break}}n.type==="fillPath"?e.fill(s):e.stroke()}get generator(){return this.gen}getDefaultOptions(){return this.gen.defaultOptions}line(e,n,r,s,i){const a=this.gen.line(e,n,r,s,i);return this.draw(a),a}rectangle(e,n,r,s,i){const a=this.gen.rectangle(e,n,r,s,i);return this.draw(a),a}ellipse(e,n,r,s,i){const a=this.gen.ellipse(e,n,r,s,i);return this.draw(a),a}circle(e,n,r,s){const i=this.gen.circle(e,n,r,s);return this.draw(i),i}linearPath(e,n){const r=this.gen.linearPath(e,n);return this.draw(r),r}polygon(e,n){const r=this.gen.polygon(e,n);return this.draw(r),r}arc(e,n,r,s,i,a,o=!1,l){const u=this.gen.arc(e,n,r,s,i,a,o,l);return this.draw(u),u}curve(e,n){const r=this.gen.curve(e,n);return this.draw(r),r}path(e,n){const r=this.gen.path(e,n);return this.draw(r),r}}const zt="http://www.w3.org/2000/svg";class $r{constructor(e,n){this.svg=e,this.gen=new Ut(n)}draw(e){const n=e.sets||[],r=e.options||this.getDefaultOptions(),s=this.svg.ownerDocument||window.document,i=s.createElementNS(zt,"g"),a=e.options.fixedDecimalPlaceDigits;for(const o of n){let l=null;switch(o.type){case"path":{l=s.createElementNS(zt,"path"),l.setAttribute("d",this.opsToPath(o,a)),l.setAttribute("stroke",r.stroke),l.setAttribute("stroke-width",r.strokeWidth+""),l.setAttribute("fill","none"),r.strokeLineDash&&l.setAttribute("stroke-dasharray",r.strokeLineDash.join(" ").trim()),r.strokeLineDashOffset&&l.setAttribute("stroke-dashoffset",`${r.strokeLineDashOffset}`);break}case"fillPath":{l=s.createElementNS(zt,"path"),l.setAttribute("d",this.opsToPath(o,a)),l.setAttribute("stroke","none"),l.setAttribute("stroke-width","0"),l.setAttribute("fill",r.fill||""),(e.shape==="curve"||e.shape==="polygon")&&l.setAttribute("fill-rule","evenodd");break}case"fillSketch":{l=this.fillSketch(s,o,r);break}}l&&i.appendChild(l)}return i}fillSketch(e,n,r){let s=r.fillWeight;s<0&&(s=r.strokeWidth/2);const i=e.createElementNS(zt,"path");return i.setAttribute("d",this.opsToPath(n,r.fixedDecimalPlaceDigits)),i.setAttribute("stroke",r.fill||""),i.setAttribute("stroke-width",s+""),i.setAttribute("fill","none"),r.fillLineDash&&i.setAttribute("stroke-dasharray",r.fillLineDash.join(" ").trim()),r.fillLineDashOffset&&i.setAttribute("stroke-dashoffset",`${r.fillLineDashOffset}`),i}get generator(){return this.gen}getDefaultOptions(){return this.gen.defaultOptions}opsToPath(e,n){return this.gen.opsToPath(e,n)}line(e,n,r,s,i){const a=this.gen.line(e,n,r,s,i);return this.draw(a)}rectangle(e,n,r,s,i){const a=this.gen.rectangle(e,n,r,s,i);return this.draw(a)}ellipse(e,n,r,s,i){const a=this.gen.ellipse(e,n,r,s,i);return this.draw(a)}circle(e,n,r,s){const i=this.gen.circle(e,n,r,s);return this.draw(i)}linearPath(e,n){const r=this.gen.linearPath(e,n);return this.draw(r)}polygon(e,n){const r=this.gen.polygon(e,n);return this.draw(r)}arc(e,n,r,s,i,a,o=!1,l){const u=this.gen.arc(e,n,r,s,i,a,o,l);return this.draw(u)}curve(e,n){const r=this.gen.curve(e,n);return this.draw(r)}path(e,n){const r=this.gen.path(e,n);return this.draw(r)}}const Br={canvas(t,e){return new Hr(t,e)},svg(t,e){return new $r(t,e)},generator(t){return new Ut(t)},newSeed(){return Ut.newSeed()}};function qt(t){"@babel/helpers - typeof";return qt=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},qt(t)}var Gr=/^\s+/,Ur=/\s+$/;function x(t,e){if(t=t||"",e=e||{},t instanceof x)return t;if(!(this instanceof x))return new x(t,e);var n=qr(t);this._originalInput=t,this._r=n.r,this._g=n.g,this._b=n.b,this._a=n.a,this._roundA=Math.round(100*this._a)/100,this._format=e.format||n.format,this._gradientType=e.gradientType,this._r<1&&(this._r=Math.round(this._r)),this._g<1&&(this._g=Math.round(this._g)),this._b<1&&(this._b=Math.round(this._b)),this._ok=n.ok}x.prototype={isDark:function(){return this.getBrightness()<128},isLight:function(){return!this.isDark()},isValid:function(){return this._ok},getOriginalInput:function(){return this._originalInput},getFormat:function(){return this._format},getAlpha:function(){return this._a},getBrightness:function(){var e=this.toRgb();return(e.r*299+e.g*587+e.b*114)/1e3},getLuminance:function(){var e=this.toRgb(),n,r,s,i,a,o;return n=e.r/255,r=e.g/255,s=e.b/255,n<=.03928?i=n/12.92:i=Math.pow((n+.055)/1.055,2.4),r<=.03928?a=r/12.92:a=Math.pow((r+.055)/1.055,2.4),s<=.03928?o=s/12.92:o=Math.pow((s+.055)/1.055,2.4),.2126*i+.7152*a+.0722*o},setAlpha:function(e){return this._a=yn(e),this._roundA=Math.round(100*this._a)/100,this},toHsv:function(){var e=Le(this._r,this._g,this._b);return{h:e.h*360,s:e.s,v:e.v,a:this._a}},toHsvString:function(){var e=Le(this._r,this._g,this._b),n=Math.round(e.h*360),r=Math.round(e.s*100),s=Math.round(e.v*100);return this._a==1?"hsv("+n+", "+r+"%, "+s+"%)":"hsva("+n+", "+r+"%, "+s+"%, "+this._roundA+")"},toHsl:function(){var e=Ie(this._r,this._g,this._b);return{h:e.h*360,s:e.s,l:e.l,a:this._a}},toHslString:function(){var e=Ie(this._r,this._g,this._b),n=Math.round(e.h*360),r=Math.round(e.s*100),s=Math.round(e.l*100);return this._a==1?"hsl("+n+", "+r+"%, "+s+"%)":"hsla("+n+", "+r+"%, "+s+"%, "+this._roundA+")"},toHex:function(e){return De(this._r,this._g,this._b,e)},toHexString:function(e){return"#"+this.toHex(e)},toHex8:function(e){return Yr(this._r,this._g,this._b,this._a,e)},toHex8String:function(e){return"#"+this.toHex8(e)},toRgb:function(){return{r:Math.round(this._r),g:Math.round(this._g),b:Math.round(this._b),a:this._a}},toRgbString:function(){return this._a==1?"rgb("+Math.round(this._r)+", "+Math.round(this._g)+", "+Math.round(this._b)+")":"rgba("+Math.round(this._r)+", "+Math.round(this._g)+", "+Math.round(this._b)+", "+this._roundA+")"},toPercentageRgb:function(){return{r:Math.round(L(this._r,255)*100)+"%",g:Math.round(L(this._g,255)*100)+"%",b:Math.round(L(this._b,255)*100)+"%",a:this._a}},toPercentageRgbString:function(){return this._a==1?"rgb("+Math.round(L(this._r,255)*100)+"%, "+Math.round(L(this._g,255)*100)+"%, "+Math.round(L(this._b,255)*100)+"%)":"rgba("+Math.round(L(this._r,255)*100)+"%, "+Math.round(L(this._g,255)*100)+"%, "+Math.round(L(this._b,255)*100)+"%, "+this._roundA+")"},toName:function(){return this._a===0?"transparent":this._a<1?!1:ls[De(this._r,this._g,this._b,!0)]||!1},toFilter:function(e){var n="#"+Ze(this._r,this._g,this._b,this._a),r=n,s=this._gradientType?"GradientType = 1, ":"";if(e){var i=x(e);r="#"+Ze(i._r,i._g,i._b,i._a)}return"progid:DXImageTransform.Microsoft.gradient("+s+"startColorstr="+n+",endColorstr="+r+")"},toString:function(e){var n=!!e;e=e||this._format;var r=!1,s=this._a<1&&this._a>=0,i=!n&&s&&(e==="hex"||e==="hex6"||e==="hex3"||e==="hex4"||e==="hex8"||e==="name");return i?e==="name"&&this._a===0?this.toName():this.toRgbString():(e==="rgb"&&(r=this.toRgbString()),e==="prgb"&&(r=this.toPercentageRgbString()),(e==="hex"||e==="hex6")&&(r=this.toHexString()),e==="hex3"&&(r=this.toHexString(!0)),e==="hex4"&&(r=this.toHex8String(!0)),e==="hex8"&&(r=this.toHex8String()),e==="name"&&(r=this.toName()),e==="hsl"&&(r=this.toHslString()),e==="hsv"&&(r=this.toHsvString()),r||this.toHexString())},clone:function(){return x(this.toString())},_applyModification:function(e,n){var r=e.apply(null,[this].concat([].slice.call(n)));return this._r=r._r,this._g=r._g,this._b=r._b,this.setAlpha(r._a),this},lighten:function(){return this._applyModification(ts,arguments)},brighten:function(){return this._applyModification(es,arguments)},darken:function(){return this._applyModification(ns,arguments)},desaturate:function(){return this._applyModification(Qr,arguments)},saturate:function(){return this._applyModification(Kr,arguments)},greyscale:function(){return this._applyModification(Jr,arguments)},spin:function(){return this._applyModification(rs,arguments)},_applyCombination:function(e,n){return e.apply(null,[this].concat([].slice.call(n)))},analogous:function(){return this._applyCombination(os,arguments)},complement:function(){return this._applyCombination(ss,arguments)},monochromatic:function(){return this._applyCombination(as,arguments)},splitcomplement:function(){return this._applyCombination(is,arguments)},triad:function(){return this._applyCombination(Fe,[3])},tetrad:function(){return this._applyCombination(Fe,[4])}};x.fromRatio=function(t,e){if(qt(t)=="object"){var n={};for(var r in t)t.hasOwnProperty(r)&&(r==="a"?n[r]=t[r]:n[r]=Ct(t[r]));t=n}return x(t,e)};function qr(t){var e={r:0,g:0,b:0},n=1,r=null,s=null,i=null,a=!1,o=!1;return typeof t=="string"&&(t=fs(t)),qt(t)=="object"&&(at(t.r)&&at(t.g)&&at(t.b)?(e=Wr(t.r,t.g,t.b),a=!0,o=String(t.r).substr(-1)==="%"?"prgb":"rgb"):at(t.h)&&at(t.s)&&at(t.v)?(r=Ct(t.s),s=Ct(t.v),e=Xr(t.h,r,s),a=!0,o="hsv"):at(t.h)&&at(t.s)&&at(t.l)&&(r=Ct(t.s),i=Ct(t.l),e=jr(t.h,r,i),a=!0,o="hsl"),t.hasOwnProperty("a")&&(n=t.a)),n=yn(n),{ok:a,format:t.format||o,r:Math.min(255,Math.max(e.r,0)),g:Math.min(255,Math.max(e.g,0)),b:Math.min(255,Math.max(e.b,0)),a:n}}function Wr(t,e,n){return{r:L(t,255)*255,g:L(e,255)*255,b:L(n,255)*255}}function Ie(t,e,n){t=L(t,255),e=L(e,255),n=L(n,255);var r=Math.max(t,e,n),s=Math.min(t,e,n),i,a,o=(r+s)/2;if(r==s)i=a=0;else{var l=r-s;switch(a=o>.5?l/(2-r-s):l/(r+s),r){case t:i=(e-n)/l+(e<n?6:0);break;case e:i=(n-t)/l+2;break;case n:i=(t-e)/l+4;break}i/=6}return{h:i,s:a,l:o}}function jr(t,e,n){var r,s,i;t=L(t,360),e=L(e,100),n=L(n,100);function a(u,h,c){return c<0&&(c+=1),c>1&&(c-=1),c<1/6?u+(h-u)*6*c:c<1/2?h:c<2/3?u+(h-u)*(2/3-c)*6:u}if(e===0)r=s=i=n;else{var o=n<.5?n*(1+e):n+e-n*e,l=2*n-o;r=a(l,o,t+1/3),s=a(l,o,t),i=a(l,o,t-1/3)}return{r:r*255,g:s*255,b:i*255}}function Le(t,e,n){t=L(t,255),e=L(e,255),n=L(n,255);var r=Math.max(t,e,n),s=Math.min(t,e,n),i,a,o=r,l=r-s;if(a=r===0?0:l/r,r==s)i=0;else{switch(r){case t:i=(e-n)/l+(e<n?6:0);break;case e:i=(n-t)/l+2;break;case n:i=(t-e)/l+4;break}i/=6}return{h:i,s:a,v:o}}function Xr(t,e,n){t=L(t,360)*6,e=L(e,100),n=L(n,100);var r=Math.floor(t),s=t-r,i=n*(1-e),a=n*(1-s*e),o=n*(1-(1-s)*e),l=r%6,u=[n,a,i,i,o,n][l],h=[o,n,n,a,i,i][l],c=[i,i,o,n,n,a][l];return{r:u*255,g:h*255,b:c*255}}function De(t,e,n,r){var s=[rt(Math.round(t).toString(16)),rt(Math.round(e).toString(16)),rt(Math.round(n).toString(16))];return r&&s[0].charAt(0)==s[0].charAt(1)&&s[1].charAt(0)==s[1].charAt(1)&&s[2].charAt(0)==s[2].charAt(1)?s[0].charAt(0)+s[1].charAt(0)+s[2].charAt(0):s.join("")}function Yr(t,e,n,r,s){var i=[rt(Math.round(t).toString(16)),rt(Math.round(e).toString(16)),rt(Math.round(n).toString(16)),rt(xn(r))];return s&&i[0].charAt(0)==i[0].charAt(1)&&i[1].charAt(0)==i[1].charAt(1)&&i[2].charAt(0)==i[2].charAt(1)&&i[3].charAt(0)==i[3].charAt(1)?i[0].charAt(0)+i[1].charAt(0)+i[2].charAt(0)+i[3].charAt(0):i.join("")}function Ze(t,e,n,r){var s=[rt(xn(r)),rt(Math.round(t).toString(16)),rt(Math.round(e).toString(16)),rt(Math.round(n).toString(16))];return s.join("")}x.equals=function(t,e){return!t||!e?!1:x(t).toRgbString()==x(e).toRgbString()};x.random=function(){return x.fromRatio({r:Math.random(),g:Math.random(),b:Math.random()})};function Qr(t,e){e=e===0?0:e||10;var n=x(t).toHsl();return n.s-=e/100,n.s=Xt(n.s),x(n)}function Kr(t,e){e=e===0?0:e||10;var n=x(t).toHsl();return n.s+=e/100,n.s=Xt(n.s),x(n)}function Jr(t){return x(t).desaturate(100)}function ts(t,e){e=e===0?0:e||10;var n=x(t).toHsl();return n.l+=e/100,n.l=Xt(n.l),x(n)}function es(t,e){e=e===0?0:e||10;var n=x(t).toRgb();return n.r=Math.max(0,Math.min(255,n.r-Math.round(255*-(e/100)))),n.g=Math.max(0,Math.min(255,n.g-Math.round(255*-(e/100)))),n.b=Math.max(0,Math.min(255,n.b-Math.round(255*-(e/100)))),x(n)}function ns(t,e){e=e===0?0:e||10;var n=x(t).toHsl();return n.l-=e/100,n.l=Xt(n.l),x(n)}function rs(t,e){var n=x(t).toHsl(),r=(n.h+e)%360;return n.h=r<0?360+r:r,x(n)}function ss(t){var e=x(t).toHsl();return e.h=(e.h+180)%360,x(e)}function Fe(t,e){if(isNaN(e)||e<=0)throw new Error("Argument to polyad must be a positive number");for(var n=x(t).toHsl(),r=[x(t)],s=360/e,i=1;i<e;i++)r.push(x({h:(n.h+i*s)%360,s:n.s,l:n.l}));return r}function is(t){var e=x(t).toHsl(),n=e.h;return[x(t),x({h:(n+72)%360,s:e.s,l:e.l}),x({h:(n+216)%360,s:e.s,l:e.l})]}function os(t,e,n){e=e||6,n=n||30;var r=x(t).toHsl(),s=360/n,i=[x(t)];for(r.h=(r.h-(s*e>>1)+720)%360;--e;)r.h=(r.h+s)%360,i.push(x(r));return i}function as(t,e){e=e||6;for(var n=x(t).toHsv(),r=n.h,s=n.s,i=n.v,a=[],o=1/e;e--;)a.push(x({h:r,s,v:i})),i=(i+o)%1;return a}x.mix=function(t,e,n){n=n===0?0:n||50;var r=x(t).toRgb(),s=x(e).toRgb(),i=n/100,a={r:(s.r-r.r)*i+r.r,g:(s.g-r.g)*i+r.g,b:(s.b-r.b)*i+r.b,a:(s.a-r.a)*i+r.a};return x(a)};x.readability=function(t,e){var n=x(t),r=x(e);return(Math.max(n.getLuminance(),r.getLuminance())+.05)/(Math.min(n.getLuminance(),r.getLuminance())+.05)};x.isReadable=function(t,e,n){var r=x.readability(t,e),s,i;switch(i=!1,s=ps(n),s.level+s.size){case"AAsmall":case"AAAlarge":i=r>=4.5;break;case"AAlarge":i=r>=3;break;case"AAAsmall":i=r>=7;break}return i};x.mostReadable=function(t,e,n){var r=null,s=0,i,a,o,l;n=n||{},a=n.includeFallbackColors,o=n.level,l=n.size;for(var u=0;u<e.length;u++)i=x.readability(t,e[u]),i>s&&(s=i,r=x(e[u]));return x.isReadable(t,r,{level:o,size:l})||!a?r:(n.includeFallbackColors=!1,x.mostReadable(t,["#fff","#000"],n))};var pe=x.names={aliceblue:"f0f8ff",antiquewhite:"faebd7",aqua:"0ff",aquamarine:"7fffd4",azure:"f0ffff",beige:"f5f5dc",bisque:"ffe4c4",black:"000",blanchedalmond:"ffebcd",blue:"00f",blueviolet:"8a2be2",brown:"a52a2a",burlywood:"deb887",burntsienna:"ea7e5d",cadetblue:"5f9ea0",chartreuse:"7fff00",chocolate:"d2691e",coral:"ff7f50",cornflowerblue:"6495ed",cornsilk:"fff8dc",crimson:"dc143c",cyan:"0ff",darkblue:"00008b",darkcyan:"008b8b",darkgoldenrod:"b8860b",darkgray:"a9a9a9",darkgreen:"006400",darkgrey:"a9a9a9",darkkhaki:"bdb76b",darkmagenta:"8b008b",darkolivegreen:"556b2f",darkorange:"ff8c00",darkorchid:"9932cc",darkred:"8b0000",darksalmon:"e9967a",darkseagreen:"8fbc8f",darkslateblue:"483d8b",darkslategray:"2f4f4f",darkslategrey:"2f4f4f",darkturquoise:"00ced1",darkviolet:"9400d3",deeppink:"ff1493",deepskyblue:"00bfff",dimgray:"696969",dimgrey:"696969",dodgerblue:"1e90ff",firebrick:"b22222",floralwhite:"fffaf0",forestgreen:"228b22",fuchsia:"f0f",gainsboro:"dcdcdc",ghostwhite:"f8f8ff",gold:"ffd700",goldenrod:"daa520",gray:"808080",green:"008000",greenyellow:"adff2f",grey:"808080",honeydew:"f0fff0",hotpink:"ff69b4",indianred:"cd5c5c",indigo:"4b0082",ivory:"fffff0",khaki:"f0e68c",lavender:"e6e6fa",lavenderblush:"fff0f5",lawngreen:"7cfc00",lemonchiffon:"fffacd",lightblue:"add8e6",lightcoral:"f08080",lightcyan:"e0ffff",lightgoldenrodyellow:"fafad2",lightgray:"d3d3d3",lightgreen:"90ee90",lightgrey:"d3d3d3",lightpink:"ffb6c1",lightsalmon:"ffa07a",lightseagreen:"20b2aa",lightskyblue:"87cefa",lightslategray:"789",lightslategrey:"789",lightsteelblue:"b0c4de",lightyellow:"ffffe0",lime:"0f0",limegreen:"32cd32",linen:"faf0e6",magenta:"f0f",maroon:"800000",mediumaquamarine:"66cdaa",mediumblue:"0000cd",mediumorchid:"ba55d3",mediumpurple:"9370db",mediumseagreen:"3cb371",mediumslateblue:"7b68ee",mediumspringgreen:"00fa9a",mediumturquoise:"48d1cc",mediumvioletred:"c71585",midnightblue:"191970",mintcream:"f5fffa",mistyrose:"ffe4e1",moccasin:"ffe4b5",navajowhite:"ffdead",navy:"000080",oldlace:"fdf5e6",olive:"808000",olivedrab:"6b8e23",orange:"ffa500",orangered:"ff4500",orchid:"da70d6",palegoldenrod:"eee8aa",palegreen:"98fb98",paleturquoise:"afeeee",palevioletred:"db7093",papayawhip:"ffefd5",peachpuff:"ffdab9",peru:"cd853f",pink:"ffc0cb",plum:"dda0dd",powderblue:"b0e0e6",purple:"800080",rebeccapurple:"663399",red:"f00",rosybrown:"bc8f8f",royalblue:"4169e1",saddlebrown:"8b4513",salmon:"fa8072",sandybrown:"f4a460",seagreen:"2e8b57",seashell:"fff5ee",sienna:"a0522d",silver:"c0c0c0",skyblue:"87ceeb",slateblue:"6a5acd",slategray:"708090",slategrey:"708090",snow:"fffafa",springgreen:"00ff7f",steelblue:"4682b4",tan:"d2b48c",teal:"008080",thistle:"d8bfd8",tomato:"ff6347",turquoise:"40e0d0",violet:"ee82ee",wheat:"f5deb3",white:"fff",whitesmoke:"f5f5f5",yellow:"ff0",yellowgreen:"9acd32"},ls=x.hexNames=us(pe);function us(t){var e={};for(var n in t)t.hasOwnProperty(n)&&(e[t[n]]=n);return e}function yn(t){return t=parseFloat(t),(isNaN(t)||t<0||t>1)&&(t=1),t}function L(t,e){hs(t)&&(t="100%");var n=cs(t);return t=Math.min(e,Math.max(0,parseFloat(t))),n&&(t=parseInt(t*e,10)/100),Math.abs(t-e)<1e-6?1:t%e/parseFloat(e)}function Xt(t){return Math.min(1,Math.max(0,t))}function Y(t){return parseInt(t,16)}function hs(t){return typeof t=="string"&&t.indexOf(".")!=-1&&parseFloat(t)===1}function cs(t){return typeof t=="string"&&t.indexOf("%")!=-1}function rt(t){return t.length==1?"0"+t:""+t}function Ct(t){return t<=1&&(t=t*100+"%"),t}function xn(t){return Math.round(parseFloat(t)*255).toString(16)}function He(t){return Y(t)/255}var tt=function(){var t="[-\\+]?\\d+%?",e="[-\\+]?\\d*\\.\\d+%?",n="(?:"+e+")|(?:"+t+")",r="[\\s|\\(]+("+n+")[,|\\s]+("+n+")[,|\\s]+("+n+")\\s*\\)?",s="[\\s|\\(]+("+n+")[,|\\s]+("+n+")[,|\\s]+("+n+")[,|\\s]+("+n+")\\s*\\)?";return{CSS_UNIT:new RegExp(n),rgb:new RegExp("rgb"+r),rgba:new RegExp("rgba"+s),hsl:new RegExp("hsl"+r),hsla:new RegExp("hsla"+s),hsv:new RegExp("hsv"+r),hsva:new RegExp("hsva"+s),hex3:/^#?([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})$/,hex6:/^#?([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})$/,hex4:/^#?([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})$/,hex8:/^#?([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})$/}}();function at(t){return!!tt.CSS_UNIT.exec(t)}function fs(t){t=t.replace(Gr,"").replace(Ur,"").toLowerCase();var e=!1;if(pe[t])t=pe[t],e=!0;else if(t=="transparent")return{r:0,g:0,b:0,a:0,format:"name"};var n;return(n=tt.rgb.exec(t))?{r:n[1],g:n[2],b:n[3]}:(n=tt.rgba.exec(t))?{r:n[1],g:n[2],b:n[3],a:n[4]}:(n=tt.hsl.exec(t))?{h:n[1],s:n[2],l:n[3]}:(n=tt.hsla.exec(t))?{h:n[1],s:n[2],l:n[3],a:n[4]}:(n=tt.hsv.exec(t))?{h:n[1],s:n[2],v:n[3]}:(n=tt.hsva.exec(t))?{h:n[1],s:n[2],v:n[3],a:n[4]}:(n=tt.hex8.exec(t))?{r:Y(n[1]),g:Y(n[2]),b:Y(n[3]),a:He(n[4]),format:e?"name":"hex8"}:(n=tt.hex6.exec(t))?{r:Y(n[1]),g:Y(n[2]),b:Y(n[3]),format:e?"name":"hex"}:(n=tt.hex4.exec(t))?{r:Y(n[1]+""+n[1]),g:Y(n[2]+""+n[2]),b:Y(n[3]+""+n[3]),a:He(n[4]+""+n[4]),format:e?"name":"hex8"}:(n=tt.hex3.exec(t))?{r:Y(n[1]+""+n[1]),g:Y(n[2]+""+n[2]),b:Y(n[3]+""+n[3]),format:e?"name":"hex"}:!1}function ps(t){var e,n;return t=t||{level:"AA",size:"small"},e=(t.level||"AA").toUpperCase(),n=(t.size||"small").toLowerCase(),e!=="AA"&&e!=="AAA"&&(e="AA"),n!=="small"&&n!=="large"&&(n="small"),{level:e,size:n}}/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */var wn=function(t,e){return(wn=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,r){n.__proto__=r}||function(n,r){for(var s in r)Object.prototype.hasOwnProperty.call(r,s)&&(n[s]=r[s])})(t,e)};function Mn(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function n(){this.constructor=t}wn(t,e),t.prototype=e===null?Object.create(e):(n.prototype=e.prototype,new n)}function Sn(t){var e="";Array.isArray(t)||(t=[t]);for(var n=0;n<t.length;n++){var r=t[n];if(r.type===b.CLOSE_PATH)e+="z";else if(r.type===b.HORIZ_LINE_TO)e+=(r.relative?"h":"H")+r.x;else if(r.type===b.VERT_LINE_TO)e+=(r.relative?"v":"V")+r.y;else if(r.type===b.MOVE_TO)e+=(r.relative?"m":"M")+r.x+" "+r.y;else if(r.type===b.LINE_TO)e+=(r.relative?"l":"L")+r.x+" "+r.y;else if(r.type===b.CURVE_TO)e+=(r.relative?"c":"C")+r.x1+" "+r.y1+" "+r.x2+" "+r.y2+" "+r.x+" "+r.y;else if(r.type===b.SMOOTH_CURVE_TO)e+=(r.relative?"s":"S")+r.x2+" "+r.y2+" "+r.x+" "+r.y;else if(r.type===b.QUAD_TO)e+=(r.relative?"q":"Q")+r.x1+" "+r.y1+" "+r.x+" "+r.y;else if(r.type===b.SMOOTH_QUAD_TO)e+=(r.relative?"t":"T")+r.x+" "+r.y;else{if(r.type!==b.ARC)throw new Error('Unexpected command type "'+r.type+'" at index '+n+".");e+=(r.relative?"a":"A")+r.rX+" "+r.rY+" "+r.xRot+" "+ +r.lArcFlag+" "+ +r.sweepFlag+" "+r.x+" "+r.y}}return e}function de(t,e){var n=t[0],r=t[1];return[n*Math.cos(e)-r*Math.sin(e),n*Math.sin(e)+r*Math.cos(e)]}function et(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];for(var n=0;n<t.length;n++)if(typeof t[n]!="number")throw new Error("assertNumbers arguments["+n+"] is not a number. "+typeof t[n]+" == typeof "+t[n]);return!0}var ct=Math.PI;function te(t,e,n){t.lArcFlag=t.lArcFlag===0?0:1,t.sweepFlag=t.sweepFlag===0?0:1;var r=t.rX,s=t.rY,i=t.x,a=t.y;r=Math.abs(t.rX),s=Math.abs(t.rY);var o=de([(e-i)/2,(n-a)/2],-t.xRot/180*ct),l=o[0],u=o[1],h=Math.pow(l,2)/Math.pow(r,2)+Math.pow(u,2)/Math.pow(s,2);1<h&&(r*=Math.sqrt(h),s*=Math.sqrt(h)),t.rX=r,t.rY=s;var c=Math.pow(r,2)*Math.pow(u,2)+Math.pow(s,2)*Math.pow(l,2),f=(t.lArcFlag!==t.sweepFlag?1:-1)*Math.sqrt(Math.max(0,(Math.pow(r,2)*Math.pow(s,2)-c)/c)),p=r*u/s*f,d=-s*l/r*f,m=de([p,d],t.xRot/180*ct);t.cX=m[0]+(e+i)/2,t.cY=m[1]+(n+a)/2,t.phi1=Math.atan2((u-d)/s,(l-p)/r),t.phi2=Math.atan2((-u-d)/s,(-l-p)/r),t.sweepFlag===0&&t.phi2>t.phi1&&(t.phi2-=2*ct),t.sweepFlag===1&&t.phi2<t.phi1&&(t.phi2+=2*ct),t.phi1*=180/ct,t.phi2*=180/ct}function $e(t,e,n){et(t,e,n);var r=t*t+e*e-n*n;if(0>r)return[];if(r===0)return[[t*n/(t*t+e*e),e*n/(t*t+e*e)]];var s=Math.sqrt(r);return[[(t*n+e*s)/(t*t+e*e),(e*n-t*s)/(t*t+e*e)],[(t*n-e*s)/(t*t+e*e),(e*n+t*s)/(t*t+e*e)]]}var Z,lt=Math.PI/180;function Be(t,e,n){return(1-n)*t+n*e}function Ge(t,e,n,r){return t+Math.cos(r/180*ct)*e+Math.sin(r/180*ct)*n}function Ue(t,e,n,r){var s=1e-6,i=e-t,a=n-e,o=3*i+3*(r-n)-6*a,l=6*(a-i),u=3*i;return Math.abs(o)<s?[-u/l]:function(h,c,f){var p=h*h/4-c;if(p<-1e-6)return[];if(p<=f)return[-h/2];var d=Math.sqrt(p);return[-h/2-d,-h/2+d]}(l/o,u/o,s)}function qe(t,e,n,r,s){var i=1-s;return t*(i*i*i)+e*(3*i*i*s)+n*(3*i*s*s)+r*(s*s*s)}(function(t){function e(){return s(function(o,l,u){return o.relative&&(o.x1!==void 0&&(o.x1+=l),o.y1!==void 0&&(o.y1+=u),o.x2!==void 0&&(o.x2+=l),o.y2!==void 0&&(o.y2+=u),o.x!==void 0&&(o.x+=l),o.y!==void 0&&(o.y+=u),o.relative=!1),o})}function n(){var o=NaN,l=NaN,u=NaN,h=NaN;return s(function(c,f,p){return c.type&b.SMOOTH_CURVE_TO&&(c.type=b.CURVE_TO,o=isNaN(o)?f:o,l=isNaN(l)?p:l,c.x1=c.relative?f-o:2*f-o,c.y1=c.relative?p-l:2*p-l),c.type&b.CURVE_TO?(o=c.relative?f+c.x2:c.x2,l=c.relative?p+c.y2:c.y2):(o=NaN,l=NaN),c.type&b.SMOOTH_QUAD_TO&&(c.type=b.QUAD_TO,u=isNaN(u)?f:u,h=isNaN(h)?p:h,c.x1=c.relative?f-u:2*f-u,c.y1=c.relative?p-h:2*p-h),c.type&b.QUAD_TO?(u=c.relative?f+c.x1:c.x1,h=c.relative?p+c.y1:c.y1):(u=NaN,h=NaN),c})}function r(){var o=NaN,l=NaN;return s(function(u,h,c){if(u.type&b.SMOOTH_QUAD_TO&&(u.type=b.QUAD_TO,o=isNaN(o)?h:o,l=isNaN(l)?c:l,u.x1=u.relative?h-o:2*h-o,u.y1=u.relative?c-l:2*c-l),u.type&b.QUAD_TO){o=u.relative?h+u.x1:u.x1,l=u.relative?c+u.y1:u.y1;var f=u.x1,p=u.y1;u.type=b.CURVE_TO,u.x1=((u.relative?0:h)+2*f)/3,u.y1=((u.relative?0:c)+2*p)/3,u.x2=(u.x+2*f)/3,u.y2=(u.y+2*p)/3}else o=NaN,l=NaN;return u})}function s(o){var l=0,u=0,h=NaN,c=NaN;return function(f){if(isNaN(h)&&!(f.type&b.MOVE_TO))throw new Error("path must start with moveto");var p=o(f,l,u,h,c);return f.type&b.CLOSE_PATH&&(l=h,u=c),f.x!==void 0&&(l=f.relative?l+f.x:f.x),f.y!==void 0&&(u=f.relative?u+f.y:f.y),f.type&b.MOVE_TO&&(h=l,c=u),p}}function i(o,l,u,h,c,f){return et(o,l,u,h,c,f),s(function(p,d,m,g){var v=p.x1,y=p.x2,S=p.relative&&!isNaN(g),M=p.x!==void 0?p.x:S?0:d,w=p.y!==void 0?p.y:S?0:m;function E(yt){return yt*yt}p.type&b.HORIZ_LINE_TO&&l!==0&&(p.type=b.LINE_TO,p.y=p.relative?0:m),p.type&b.VERT_LINE_TO&&u!==0&&(p.type=b.LINE_TO,p.x=p.relative?0:d),p.x!==void 0&&(p.x=p.x*o+w*u+(S?0:c)),p.y!==void 0&&(p.y=M*l+p.y*h+(S?0:f)),p.x1!==void 0&&(p.x1=p.x1*o+p.y1*u+(S?0:c)),p.y1!==void 0&&(p.y1=v*l+p.y1*h+(S?0:f)),p.x2!==void 0&&(p.x2=p.x2*o+p.y2*u+(S?0:c)),p.y2!==void 0&&(p.y2=y*l+p.y2*h+(S?0:f));var _=o*h-l*u;if(p.xRot!==void 0&&(o!==1||l!==0||u!==0||h!==1))if(_===0)delete p.rX,delete p.rY,delete p.xRot,delete p.lArcFlag,delete p.sweepFlag,p.type=b.LINE_TO;else{var V=p.xRot*Math.PI/180,R=Math.sin(V),U=Math.cos(V),B=1/E(p.rX),k=1/E(p.rY),T=E(U)*B+E(R)*k,z=2*R*U*(B-k),F=E(R)*B+E(U)*k,H=T*h*h-z*l*h+F*l*l,D=z*(o*h+l*u)-2*(T*u*h+F*o*l),q=T*u*u-z*o*u+F*o*o,N=(Math.atan2(D,H-q)+Math.PI)%Math.PI/2,I=Math.sin(N),K=Math.cos(N);p.rX=Math.abs(_)/Math.sqrt(H*E(K)+D*I*K+q*E(I)),p.rY=Math.abs(_)/Math.sqrt(H*E(I)-D*I*K+q*E(K)),p.xRot=180*N/Math.PI}return p.sweepFlag!==void 0&&0>_&&(p.sweepFlag=+!p.sweepFlag),p})}function a(){return function(o){var l={};for(var u in o)l[u]=o[u];return l}}t.ROUND=function(o){function l(u){return Math.round(u*o)/o}return o===void 0&&(o=1e13),et(o),function(u){return u.x1!==void 0&&(u.x1=l(u.x1)),u.y1!==void 0&&(u.y1=l(u.y1)),u.x2!==void 0&&(u.x2=l(u.x2)),u.y2!==void 0&&(u.y2=l(u.y2)),u.x!==void 0&&(u.x=l(u.x)),u.y!==void 0&&(u.y=l(u.y)),u.rX!==void 0&&(u.rX=l(u.rX)),u.rY!==void 0&&(u.rY=l(u.rY)),u}},t.TO_ABS=e,t.TO_REL=function(){return s(function(o,l,u){return o.relative||(o.x1!==void 0&&(o.x1-=l),o.y1!==void 0&&(o.y1-=u),o.x2!==void 0&&(o.x2-=l),o.y2!==void 0&&(o.y2-=u),o.x!==void 0&&(o.x-=l),o.y!==void 0&&(o.y-=u),o.relative=!0),o})},t.NORMALIZE_HVZ=function(o,l,u){return o===void 0&&(o=!0),l===void 0&&(l=!0),u===void 0&&(u=!0),s(function(h,c,f,p,d){if(isNaN(p)&&!(h.type&b.MOVE_TO))throw new Error("path must start with moveto");return l&&h.type&b.HORIZ_LINE_TO&&(h.type=b.LINE_TO,h.y=h.relative?0:f),u&&h.type&b.VERT_LINE_TO&&(h.type=b.LINE_TO,h.x=h.relative?0:c),o&&h.type&b.CLOSE_PATH&&(h.type=b.LINE_TO,h.x=h.relative?p-c:p,h.y=h.relative?d-f:d),h.type&b.ARC&&(h.rX===0||h.rY===0)&&(h.type=b.LINE_TO,delete h.rX,delete h.rY,delete h.xRot,delete h.lArcFlag,delete h.sweepFlag),h})},t.NORMALIZE_ST=n,t.QT_TO_C=r,t.INFO=s,t.SANITIZE=function(o){o===void 0&&(o=0),et(o);var l=NaN,u=NaN,h=NaN,c=NaN;return s(function(f,p,d,m,g){var v=Math.abs,y=!1,S=0,M=0;if(f.type&b.SMOOTH_CURVE_TO&&(S=isNaN(l)?0:p-l,M=isNaN(u)?0:d-u),f.type&(b.CURVE_TO|b.SMOOTH_CURVE_TO)?(l=f.relative?p+f.x2:f.x2,u=f.relative?d+f.y2:f.y2):(l=NaN,u=NaN),f.type&b.SMOOTH_QUAD_TO?(h=isNaN(h)?p:2*p-h,c=isNaN(c)?d:2*d-c):f.type&b.QUAD_TO?(h=f.relative?p+f.x1:f.x1,c=f.relative?d+f.y1:f.y2):(h=NaN,c=NaN),f.type&b.LINE_COMMANDS||f.type&b.ARC&&(f.rX===0||f.rY===0||!f.lArcFlag)||f.type&b.CURVE_TO||f.type&b.SMOOTH_CURVE_TO||f.type&b.QUAD_TO||f.type&b.SMOOTH_QUAD_TO){var w=f.x===void 0?0:f.relative?f.x:f.x-p,E=f.y===void 0?0:f.relative?f.y:f.y-d;S=isNaN(h)?f.x1===void 0?S:f.relative?f.x:f.x1-p:h-p,M=isNaN(c)?f.y1===void 0?M:f.relative?f.y:f.y1-d:c-d;var _=f.x2===void 0?0:f.relative?f.x:f.x2-p,V=f.y2===void 0?0:f.relative?f.y:f.y2-d;v(w)<=o&&v(E)<=o&&v(S)<=o&&v(M)<=o&&v(_)<=o&&v(V)<=o&&(y=!0)}return f.type&b.CLOSE_PATH&&v(p-m)<=o&&v(d-g)<=o&&(y=!0),y?[]:f})},t.MATRIX=i,t.ROTATE=function(o,l,u){l===void 0&&(l=0),u===void 0&&(u=0),et(o,l,u);var h=Math.sin(o),c=Math.cos(o);return i(c,h,-h,c,l-l*c+u*h,u-l*h-u*c)},t.TRANSLATE=function(o,l){return l===void 0&&(l=0),et(o,l),i(1,0,0,1,o,l)},t.SCALE=function(o,l){return l===void 0&&(l=o),et(o,l),i(o,0,0,l,0,0)},t.SKEW_X=function(o){return et(o),i(1,0,Math.atan(o),1,0,0)},t.SKEW_Y=function(o){return et(o),i(1,Math.atan(o),0,1,0,0)},t.X_AXIS_SYMMETRY=function(o){return o===void 0&&(o=0),et(o),i(-1,0,0,1,o,0)},t.Y_AXIS_SYMMETRY=function(o){return o===void 0&&(o=0),et(o),i(1,0,0,-1,0,o)},t.A_TO_C=function(){return s(function(o,l,u){return b.ARC===o.type?function(h,c,f){var p,d,m,g;h.cX||te(h,c,f);for(var v=Math.min(h.phi1,h.phi2),y=Math.max(h.phi1,h.phi2)-v,S=Math.ceil(y/90),M=new Array(S),w=c,E=f,_=0;_<S;_++){var V=Be(h.phi1,h.phi2,_/S),R=Be(h.phi1,h.phi2,(_+1)/S),U=R-V,B=4/3*Math.tan(U*lt/4),k=[Math.cos(V*lt)-B*Math.sin(V*lt),Math.sin(V*lt)+B*Math.cos(V*lt)],T=k[0],z=k[1],F=[Math.cos(R*lt),Math.sin(R*lt)],H=F[0],D=F[1],q=[H+B*Math.sin(R*lt),D-B*Math.cos(R*lt)],N=q[0],I=q[1];M[_]={relative:h.relative,type:b.CURVE_TO};var K=function(yt,St){var we=de([yt*h.rX,St*h.rY],h.xRot),On=we[0],Tn=we[1];return[h.cX+On,h.cY+Tn]};p=K(T,z),M[_].x1=p[0],M[_].y1=p[1],d=K(N,I),M[_].x2=d[0],M[_].y2=d[1],m=K(H,D),M[_].x=m[0],M[_].y=m[1],h.relative&&(M[_].x1-=w,M[_].y1-=E,M[_].x2-=w,M[_].y2-=E,M[_].x-=w,M[_].y-=E),w=(g=[M[_].x,M[_].y])[0],E=g[1]}return M}(o,o.relative?0:l,o.relative?0:u):o})},t.ANNOTATE_ARCS=function(){return s(function(o,l,u){return o.relative&&(l=0,u=0),b.ARC===o.type&&te(o,l,u),o})},t.CLONE=a,t.CALCULATE_BOUNDS=function(){var o=function(f){var p={};for(var d in f)p[d]=f[d];return p},l=e(),u=r(),h=n(),c=s(function(f,p,d){var m=h(u(l(o(f))));function g(I){I>c.maxX&&(c.maxX=I),I<c.minX&&(c.minX=I)}function v(I){I>c.maxY&&(c.maxY=I),I<c.minY&&(c.minY=I)}if(m.type&b.DRAWING_COMMANDS&&(g(p),v(d)),m.type&b.HORIZ_LINE_TO&&g(m.x),m.type&b.VERT_LINE_TO&&v(m.y),m.type&b.LINE_TO&&(g(m.x),v(m.y)),m.type&b.CURVE_TO){g(m.x),v(m.y);for(var y=0,S=Ue(p,m.x1,m.x2,m.x);y<S.length;y++)0<(N=S[y])&&1>N&&g(qe(p,m.x1,m.x2,m.x,N));for(var M=0,w=Ue(d,m.y1,m.y2,m.y);M<w.length;M++)0<(N=w[M])&&1>N&&v(qe(d,m.y1,m.y2,m.y,N))}if(m.type&b.ARC){g(m.x),v(m.y),te(m,p,d);for(var E=m.xRot/180*Math.PI,_=Math.cos(E)*m.rX,V=Math.sin(E)*m.rX,R=-Math.sin(E)*m.rY,U=Math.cos(E)*m.rY,B=m.phi1<m.phi2?[m.phi1,m.phi2]:-180>m.phi2?[m.phi2+360,m.phi1+360]:[m.phi2,m.phi1],k=B[0],T=B[1],z=function(I){var K=I[0],yt=I[1],St=180*Math.atan2(yt,K)/Math.PI;return St<k?St+360:St},F=0,H=$e(R,-_,0).map(z);F<H.length;F++)(N=H[F])>k&&N<T&&g(Ge(m.cX,_,R,N));for(var D=0,q=$e(U,-V,0).map(z);D<q.length;D++){var N;(N=q[D])>k&&N<T&&v(Ge(m.cY,V,U,N))}}return f});return c.minX=1/0,c.maxX=-1/0,c.minY=1/0,c.maxY=-1/0,c}})(Z||(Z={}));var J,An=function(){function t(){}return t.prototype.round=function(e){return this.transform(Z.ROUND(e))},t.prototype.toAbs=function(){return this.transform(Z.TO_ABS())},t.prototype.toRel=function(){return this.transform(Z.TO_REL())},t.prototype.normalizeHVZ=function(e,n,r){return this.transform(Z.NORMALIZE_HVZ(e,n,r))},t.prototype.normalizeST=function(){return this.transform(Z.NORMALIZE_ST())},t.prototype.qtToC=function(){return this.transform(Z.QT_TO_C())},t.prototype.aToC=function(){return this.transform(Z.A_TO_C())},t.prototype.sanitize=function(e){return this.transform(Z.SANITIZE(e))},t.prototype.translate=function(e,n){return this.transform(Z.TRANSLATE(e,n))},t.prototype.scale=function(e,n){return this.transform(Z.SCALE(e,n))},t.prototype.rotate=function(e,n,r){return this.transform(Z.ROTATE(e,n,r))},t.prototype.matrix=function(e,n,r,s,i,a){return this.transform(Z.MATRIX(e,n,r,s,i,a))},t.prototype.skewX=function(e){return this.transform(Z.SKEW_X(e))},t.prototype.skewY=function(e){return this.transform(Z.SKEW_Y(e))},t.prototype.xSymmetry=function(e){return this.transform(Z.X_AXIS_SYMMETRY(e))},t.prototype.ySymmetry=function(e){return this.transform(Z.Y_AXIS_SYMMETRY(e))},t.prototype.annotateArcs=function(){return this.transform(Z.ANNOTATE_ARCS())},t}(),ds=function(t){return t===" "||t==="	"||t==="\r"||t===`
`},We=function(t){return 48<=t.charCodeAt(0)&&t.charCodeAt(0)<=57},ms=function(t){function e(){var n=t.call(this)||this;return n.curNumber="",n.curCommandType=-1,n.curCommandRelative=!1,n.canParseCommandOrComma=!0,n.curNumberHasExp=!1,n.curNumberHasExpDigits=!1,n.curNumberHasDecimal=!1,n.curArgs=[],n}return Mn(e,t),e.prototype.finish=function(n){if(n===void 0&&(n=[]),this.parse(" ",n),this.curArgs.length!==0||!this.canParseCommandOrComma)throw new SyntaxError("Unterminated command at the path end.");return n},e.prototype.parse=function(n,r){var s=this;r===void 0&&(r=[]);for(var i=function(c){r.push(c),s.curArgs.length=0,s.canParseCommandOrComma=!0},a=0;a<n.length;a++){var o=n[a],l=!(this.curCommandType!==b.ARC||this.curArgs.length!==3&&this.curArgs.length!==4||this.curNumber.length!==1||this.curNumber!=="0"&&this.curNumber!=="1"),u=We(o)&&(this.curNumber==="0"&&o==="0"||l);if(!We(o)||u)if(o!=="e"&&o!=="E")if(o!=="-"&&o!=="+"||!this.curNumberHasExp||this.curNumberHasExpDigits)if(o!=="."||this.curNumberHasExp||this.curNumberHasDecimal||l){if(this.curNumber&&this.curCommandType!==-1){var h=Number(this.curNumber);if(isNaN(h))throw new SyntaxError("Invalid number ending at "+a);if(this.curCommandType===b.ARC){if(this.curArgs.length===0||this.curArgs.length===1){if(0>h)throw new SyntaxError('Expected positive number, got "'+h+'" at index "'+a+'"')}else if((this.curArgs.length===3||this.curArgs.length===4)&&this.curNumber!=="0"&&this.curNumber!=="1")throw new SyntaxError('Expected a flag, got "'+this.curNumber+'" at index "'+a+'"')}this.curArgs.push(h),this.curArgs.length===gs[this.curCommandType]&&(b.HORIZ_LINE_TO===this.curCommandType?i({type:b.HORIZ_LINE_TO,relative:this.curCommandRelative,x:h}):b.VERT_LINE_TO===this.curCommandType?i({type:b.VERT_LINE_TO,relative:this.curCommandRelative,y:h}):this.curCommandType===b.MOVE_TO||this.curCommandType===b.LINE_TO||this.curCommandType===b.SMOOTH_QUAD_TO?(i({type:this.curCommandType,relative:this.curCommandRelative,x:this.curArgs[0],y:this.curArgs[1]}),b.MOVE_TO===this.curCommandType&&(this.curCommandType=b.LINE_TO)):this.curCommandType===b.CURVE_TO?i({type:b.CURVE_TO,relative:this.curCommandRelative,x1:this.curArgs[0],y1:this.curArgs[1],x2:this.curArgs[2],y2:this.curArgs[3],x:this.curArgs[4],y:this.curArgs[5]}):this.curCommandType===b.SMOOTH_CURVE_TO?i({type:b.SMOOTH_CURVE_TO,relative:this.curCommandRelative,x2:this.curArgs[0],y2:this.curArgs[1],x:this.curArgs[2],y:this.curArgs[3]}):this.curCommandType===b.QUAD_TO?i({type:b.QUAD_TO,relative:this.curCommandRelative,x1:this.curArgs[0],y1:this.curArgs[1],x:this.curArgs[2],y:this.curArgs[3]}):this.curCommandType===b.ARC&&i({type:b.ARC,relative:this.curCommandRelative,rX:this.curArgs[0],rY:this.curArgs[1],xRot:this.curArgs[2],lArcFlag:this.curArgs[3],sweepFlag:this.curArgs[4],x:this.curArgs[5],y:this.curArgs[6]})),this.curNumber="",this.curNumberHasExpDigits=!1,this.curNumberHasExp=!1,this.curNumberHasDecimal=!1,this.canParseCommandOrComma=!0}if(!ds(o))if(o===","&&this.canParseCommandOrComma)this.canParseCommandOrComma=!1;else if(o!=="+"&&o!=="-"&&o!==".")if(u)this.curNumber=o,this.curNumberHasDecimal=!1;else{if(this.curArgs.length!==0)throw new SyntaxError("Unterminated command at index "+a+".");if(!this.canParseCommandOrComma)throw new SyntaxError('Unexpected character "'+o+'" at index '+a+". Command cannot follow comma");if(this.canParseCommandOrComma=!1,o!=="z"&&o!=="Z")if(o==="h"||o==="H")this.curCommandType=b.HORIZ_LINE_TO,this.curCommandRelative=o==="h";else if(o==="v"||o==="V")this.curCommandType=b.VERT_LINE_TO,this.curCommandRelative=o==="v";else if(o==="m"||o==="M")this.curCommandType=b.MOVE_TO,this.curCommandRelative=o==="m";else if(o==="l"||o==="L")this.curCommandType=b.LINE_TO,this.curCommandRelative=o==="l";else if(o==="c"||o==="C")this.curCommandType=b.CURVE_TO,this.curCommandRelative=o==="c";else if(o==="s"||o==="S")this.curCommandType=b.SMOOTH_CURVE_TO,this.curCommandRelative=o==="s";else if(o==="q"||o==="Q")this.curCommandType=b.QUAD_TO,this.curCommandRelative=o==="q";else if(o==="t"||o==="T")this.curCommandType=b.SMOOTH_QUAD_TO,this.curCommandRelative=o==="t";else{if(o!=="a"&&o!=="A")throw new SyntaxError('Unexpected character "'+o+'" at index '+a+".");this.curCommandType=b.ARC,this.curCommandRelative=o==="a"}else r.push({type:b.CLOSE_PATH}),this.canParseCommandOrComma=!0,this.curCommandType=-1}else this.curNumber=o,this.curNumberHasDecimal=o==="."}else this.curNumber+=o,this.curNumberHasDecimal=!0;else this.curNumber+=o;else this.curNumber+=o,this.curNumberHasExp=!0;else this.curNumber+=o,this.curNumberHasExpDigits=this.curNumberHasExp}return r},e.prototype.transform=function(n){return Object.create(this,{parse:{value:function(r,s){s===void 0&&(s=[]);for(var i=0,a=Object.getPrototypeOf(this).parse.call(this,r);i<a.length;i++){var o=a[i],l=n(o);Array.isArray(l)?s.push.apply(s,l):s.push(l)}return s}}})},e}(An),b=function(t){function e(n){var r=t.call(this)||this;return r.commands=typeof n=="string"?e.parse(n):n,r}return Mn(e,t),e.prototype.encode=function(){return e.encode(this.commands)},e.prototype.getBounds=function(){var n=Z.CALCULATE_BOUNDS();return this.transform(n),n},e.prototype.transform=function(n){for(var r=[],s=0,i=this.commands;s<i.length;s++){var a=n(i[s]);Array.isArray(a)?r.push.apply(r,a):r.push(a)}return this.commands=r,this},e.encode=function(n){return Sn(n)},e.parse=function(n){var r=new ms,s=[];return r.parse(n,s),r.finish(s),s},e.CLOSE_PATH=1,e.MOVE_TO=2,e.HORIZ_LINE_TO=4,e.VERT_LINE_TO=8,e.LINE_TO=16,e.CURVE_TO=32,e.SMOOTH_CURVE_TO=64,e.QUAD_TO=128,e.SMOOTH_QUAD_TO=256,e.ARC=512,e.LINE_COMMANDS=e.LINE_TO|e.HORIZ_LINE_TO|e.VERT_LINE_TO,e.DRAWING_COMMANDS=e.HORIZ_LINE_TO|e.VERT_LINE_TO|e.LINE_TO|e.CURVE_TO|e.SMOOTH_CURVE_TO|e.QUAD_TO|e.SMOOTH_QUAD_TO|e.ARC,e}(An),gs=((J={})[b.MOVE_TO]=2,J[b.LINE_TO]=2,J[b.HORIZ_LINE_TO]=1,J[b.VERT_LINE_TO]=1,J[b.CLOSE_PATH]=0,J[b.QUAD_TO]=4,J[b.SMOOTH_QUAD_TO]=2,J[b.CURVE_TO]=6,J[b.SMOOTH_CURVE_TO]=4,J[b.ARC]=7,J),ft;function dt(t){if(t.children!==void 0)return t.children;let e,n=0;const r=t.childNodes,s=[];for(;e=r[n++];)e.nodeType===1&&s.push(e);return s}function ye(t){const e=t.parentNode;return e&&e.nodeType===Node.ELEMENT_NODE?e:null}function ee(t,e){for(;e.firstChild;)t.append(e.firstChild);return t}function Mt(t){if(t===null)return null;const e=/url\('#?(.*?)'\)/.exec(t)||/url\("#?(.*?)"\)/.exec(t)||/url\(#?(.*?)\)/.exec(t);return e&&e.length>1?e[1]:null}(function(t){t[t.SVG=0]="SVG",t[t.CANVAS=1]="CANVAS"})(ft||(ft={}));const kt="data-sketchy-clip-path",vs=/[acsqt]/i;function xe(t){if(t.svgSketchDefs)return t.svgSketchDefs;const e=t.svgSketch,n=document.createElementNS("http://www.w3.org/2000/svg","defs");return e.childElementCount>0?e.insertBefore(n,e.firstElementChild):e.appendChild(n),t.svgSketchDefs=n,n}function je(t){const e=t.getAttribute("points");if(!e)return[];let n;n=e.indexOf(" ")>0?/\s+/g:/,/g;const r=e.split(n),s=[];for(let i=0;i<r.length;i++){const a=r[i],o=a.split(",");if(o.length===2)s.push({x:parseFloat(o[0]),y:parseFloat(o[1])});else{const l=i+1;l<r.length&&(s.push({x:parseFloat(a),y:parseFloat(r[l])}),i=l)}}return s}function Q(t,e,n){let r=n;const s=e.getAttribute(kt),i=t.pencilFilter&&e.tagName!=="text";if(!(r.tagName==="g"&&r.attributes.length===0)&&(s||i)){const a=document.createElementNS("http://www.w3.org/2000/svg","g");a.appendChild(r),r=a}s&&(r.setAttribute("clip-path",`url(#${s})`),e.removeAttribute(kt)),i&&r.setAttribute("filter","url(#pencilTextureFilter)"),t.svgSketch.appendChild(r)}function It(t,e,n){return vs.test(e)&&(n=n?Object.assign(Object.assign({},n),{preserveVertices:!0}):{preserveVertices:!0}),t.rc.path(e,n)}function G(t,e,n,r){let s;if(s=r?e.getAttribute(n):getComputedStyle(e)[n]||e.getAttribute(n),!s){let i=ye(e);const a=r;let o=a;return a&&a.referenced===e&&(i=a.root,o=a.parentContext),!i||i===t.sourceSvg?void 0:G(t,i,n,o)}return s}function En(t,e,n,r){let s;if(s=r?e.getAttribute("opacity"):getComputedStyle(e).opacity||e.getAttribute("opacity"),s){let l=1;l=s.indexOf("%")!==-1?Math.min(1,Math.max(0,parseFloat(s.substring(0,s.length-1))/100)):Math.min(1,Math.max(0,parseFloat(s))),n*=l}let i=ye(e);const a=r;let o=a;return a&&a.referenced===e&&(i=a.root,o=a.parentContext),i&&i!==t.sourceSvg?En(t,i,n,o):n}function bt(t,e,n){const{fillId:r,strokeId:s}=function(i,a){function o(l){const u=a.getAttribute(l);if(u&&u.indexOf("url")!==-1){const h=Mt(u);if(h&&i.idElements[h]instanceof SVGPatternElement)return h}return null}return{fillId:o("fill"),strokeId:o("stroke")}}(t,e);if(r!==null||s!==null){const i=n();i.setAttribute("fill",r!==null?`url(#${r})`:"none"),i.setAttribute("stroke",s!==null?`url(#${s})`:"none");const a=G(t,e,"stroke-width",t.useElementContext);i.setAttribute("stroke-width",a??"0"),Q(t,e,i),Xe(t,r),Xe(t,s)}}function Xe(t,e){if(e===null)return;const n=xe(t),r=`#${e}`;if(!n.querySelector(r)){const s=t.sourceSvg.querySelector(r);if(s){if(!t.sketchPatterns)return void n.appendChild(s.cloneNode(!0));const i=function(o,l,u){const h=document.createElementNS("http://www.w3.org/2000/svg","svg");h.appendChild(l);const c=Object.assign(Object.assign({},o),{sourceSvg:h,svgSketch:document.createElementNS("http://www.w3.org/2000/svg","svg"),roughConfig:Object.assign(Object.assign({},o.roughConfig),u)});return c.processElement(c,l,null),ee(document.createElementNS("http://www.w3.org/2000/svg","g"),c.svgSketch)}(t,ee(document.createElementNS("http://www.w3.org/2000/svg","g"),s.cloneNode(!0)),{fillStyle:"solid",roughness:.5}),a=s.cloneNode();n.appendChild(ee(a,i))}}}const bs=/^([+-]?(?:\d+|\d*\.\d+(?:[eE][+-]?\d+)?))([a-z]*|%)$/,Ye={in:96,cm:96/2.54,mm:96/25.4,pt:96/72,pc:16,px:1},ys=Math.sqrt(2);function _t(t,e,n,r){const{value:s,unit:i}=ne(n);return function(a){return!!Ye[a]}(i)?function(a,o){var l;const u=(l=Ye[o])!==null&&l!==void 0?l:1;return a*u}(s,i):function(a,o,l,u,h){var c;const f=(c=a.viewBox)!==null&&c!==void 0?c:{w:0,h:0};if(h==="%")return function(p,d,{w:m,h:g}={w:0,h:0}){const v=d/100;return p==="x"?v*m:p==="y"?v*g:v*(Math.sqrt(m*m+g*g)/ys)}(l,u,f);if(h==="vw"||h==="vh"||h==="vmin"||h==="vmax")return function(p,d,{w:m,h:g}={w:0,h:0}){var v,y;const S=p/100,M=(v=window.innerWidth)!==null&&v!==void 0?v:m,w=(y=window.innerHeight)!==null&&y!==void 0?y:g;if(d==="vw")return S*M;if(d==="vh")return S*w;if(d==="vmin")return S*Math.min(M,w);if(d==="vmax")return S*Math.max(M,w);throw new Error(`Not a viewport length unit: ${d}`)}(u,h,f);if(h==="em"||h==="ex"||h==="ch"||h==="rem")return function(p,d,m,g){var v;if(g==="rem"){const w=document.documentElement,E=ne(getComputedStyle(w).fontSize);return m*(E.unit==="px"?E.value:16)}if(g==="ch"){const w=function(E){const _=ye(E);if(!_)return 1;const V=document.createElementNS("http://www.w3.org/2000/svg","text");V.style.visibility="hidden",V.appendChild(document.createTextNode("0")),_.appendChild(V);const R=V.getBBox();return _.removeChild(V),R.width}(d);return m*w}const y=(v=G(p,d,"font-size",p.useElementContext))!==null&&v!==void 0?v:"16px",S=ne(y),M=S.unit==="px"?S.value:16;if(g==="em")return m*M;if(g==="ex")return m*M*.5;throw new Error(`Not a font relative unit: ${g}`)}(a,o,u,h);throw new Error(`Unsupported relative length unit: ${h}`)}(t,e,r,s,i)}function ne(t){const e=t.match(bs);if(e===null||e.length!==3)throw new Error(`Cannot parse dimension: ${t}`);return{value:parseFloat(e[1]),unit:e[2].toLowerCase()||"px"}}function Ot(t){if(!t)return!0;const e=t.matrix;return!e||e.a===1&&e.b===0&&e.c===0&&e.d===1&&e.e===0&&e.f===0}function re(t){if(!t)return!0;const e=t.matrix;return!e||e.a===1&&e.b===0&&e.c===0&&e.d===1}function C(t,e){if(!e)return t;const n=e.matrix;return{x:n.a*t.x+n.c*t.y+n.e,y:n.b*t.x+n.d*t.y+n.f}}function Qe(t){return t.transform&&t.transform.baseVal.numberOfItems>0?t.transform.baseVal.consolidate():null}function Nt(t,e,n){if(!n)return Qe(e);const r=Qe(e);if(r){const s=r.matrix,i=n.matrix.multiply(s);return t.sourceSvg.createSVGTransformFromMatrix(i)}return n}function pt(t,e,n){if(e&&e.matrix&&!Ot(e)){const r=e.matrix;n.transform.baseVal.numberOfItems>0?n.transform.baseVal.getItem(0).setMatrix(r):n.transform.baseVal.appendItem(e)}}function Ke(t){var e;let n=t.getAttribute("stop-color");if(!n){const r=(e=t.getAttribute("style"))!==null&&e!==void 0?e:"",s=/stop-color:\s?(.*);?/.exec(r);s&&s.length>1&&(n=s[1])}return x(n||"white")}function Je(t){const e=t.length;let n=0,r=0,s=0,i=0;return t.forEach(a=>{const o=a.toRgb();n+=o.r*o.r,r+=o.g*o.g,s+=o.b*o.b,i+=o.a}),x({r:Math.sqrt(n/e),g:Math.sqrt(r/e),b:Math.sqrt(s/e),a:i/e})}function xs(t){const e=t.getAttribute("offset");return e?e.indexOf("%")?parseFloat(e.substring(0,e.length-1)):100*parseFloat(e):0}function ws(t,e){if(t.roughConfig.fillStyle==="solid")return{angle:0,gap:0,weight:0};const{width:n,height:r}=e.getBoundingClientRect(),s=n/r,i=Math.sqrt(n*r),{angle:a,gap:o,weight:l}=function(u){const h={angle:{normal:[-30,-50],horizontal:[-30,-50],vertical:[-30,-50]},weight:{normal:[.5,3],small:[.5,3]},gap:{normal:[3,5],small:[3,5]}},c={angle:{normal:[-30,-50],horizontal:[-50,-75],vertical:[-30,-15]},weight:{normal:[1,3],small:[.5,1.7]},gap:{normal:[2,5],small:[1,3]}};switch(u){default:return c;case"zigzag":case"zigzag-line":return Object.assign(Object.assign({},c),{weight:{normal:[.5,3],small:[.5,2]},gap:{normal:[2,6],small:[2,5]}});case"cross-hatch":return Object.assign(Object.assign({},c),{weight:{normal:[1,3],small:[.5,1.3]},gap:{normal:[4,8],small:[2,5]}});case"dots":return h}}(t.roughConfig.fillStyle);return{angle:Ms(t,a,s),gap:Ss(t,o,i),weight:As(t,l,i)}}function Ms({rng:t},{normal:e,horizontal:n,vertical:r},s){if(isFinite(s)){if(s<.25)return t.next(n);if(s>6)return t.next(r)}return t.next(e)}function Ss({rng:t},{normal:e,small:n},r){return r<45?t.next(n):t.next(e)}function As({rng:t},{normal:e,small:n},r){return r<45?t.next(n):t.next(e)}function st(t,e,n){var r;const s=(r=t.roughConfig.fixedDecimalPlaceDigits)!==null&&r!==void 0?r:15,i=Object.assign({},t.roughConfig);let a=1;if(!Ot(n)){const m=n.matrix,g=m.a*m.d-m.c*m.b;a=Math.sqrt(Math.abs(g))}const o=En(t,e,1,t.useElementContext),l=G(t,e,"fill",t.useElementContext)||"black",u=o*tn(e,"fill-opacity");if(l.indexOf("url")!==-1){const m=en(t,l,u);m!=="none"?i.fill=m:delete i.fill}else if(l==="none")delete i.fill;else{const m=x(l);m.setAlpha(u),i.fill=m.toString()}const h=G(t,e,"stroke",t.useElementContext),c=o*tn(e,"stroke-opacity");if(h)if(h.indexOf("url")!==-1)i.stroke=en(t,h,c);else if(h==="none")i.stroke="none";else{const m=x(h);m.setAlpha(c),i.stroke=m.toString()}else i.stroke="none";const f=G(t,e,"stroke-width",t.useElementContext);if(f){const m=_t(t,e,f,"stroke-width")*a;i.strokeWidth=parseFloat(m.toFixed(s))}else i.strokeWidth=1;const p=G(t,e,"stroke-dasharray",t.useElementContext);p&&p!=="none"&&(i.strokeLineDash=p.split(/[\s,]+/).filter(m=>m.length>0).map(m=>{const g=_t(t,e,m,"stroke-dasharray")*a;return Math.max(.5,parseFloat(g.toFixed(s)))}));const d=G(t,e,"stroke-dashoffset",t.useElementContext);if(d){const m=_t(t,e,d,"stroke-dashoffset")*a;i.strokeLineDashOffset=parseFloat(m.toFixed(s))}if(i.fill&&i.stroke==="none"&&(i.stroke=i.fill,i.strokeWidth=1),t.randomize){const{angle:m,gap:g,weight:v}=ws(t,e);i.hachureAngle=m,i.hachureGap=Math.round(g),i.fillWeight=parseFloat(v.toFixed(s)),i.disableMultiStroke===void 0&&(i.disableMultiStroke=t.rng.next()>.3)}return i}function tn(t,e){const n=getComputedStyle(t)[e]||t.getAttribute(e);return n?n.indexOf("%")!==-1?Math.min(1,Math.max(0,parseFloat(n.substring(0,n.length-1))/100)):Math.min(1,Math.max(0,parseFloat(n))):1}function en(t,e,n){const r=Mt(e);if(!r)return"none";const s=t.idElements[r];if(!s)return"none";if(typeof s=="string")return s;if(s instanceof SVGLinearGradientElement||s instanceof SVGRadialGradientElement){const i=function(a,o){const l=Array.prototype.slice.apply(a.querySelectorAll("stop"));if(l.length===0)return"transparent";if(l.length===1){const u=Ke(l[0]);return u.setAlpha(o),u.toString()}{const h=[];let c=null;for(let p=0;p<l.length;p++){const d=Ke(l[p]),m=xs(l[p]),g=c?Je([c,d]):d;let v=Math.max(1,m/10|0);for(;v>0;)h.push(g),v--;c=d}const f=Je(h);return f.setAlpha(o),f.toString()}}(s,n);return t.idElements[r]=i,i}return"none"}function O(t){return`${t.x},${t.y}`}function Lt(t,e,n,r){if(n.length===0)return;const s=n[0],i=n[n.length-1],a=Mt(e.getAttribute("marker-start")),o=a?t.idElements[a]:null;if(o&&n.length>1){let f=o.orientAngle.baseVal.value;const p=n[1],d=o.getAttribute("orient");if(d==="auto"||d==="auto-start-reverse"){const y=d==="auto"?0:180,S=n[n.length-2];nn(n)?f=ie(S,i,p)-y:f=Wt({x:1,y:0},{x:p.x-s.x,y:p.y-s.y})-y}const m=t.sourceSvg.createSVGMatrix().translate(s.x,s.y).rotate(f).scale(se(t,o,e)),g=r?r.matrix.multiply(m):m,v=t.sourceSvg.createSVGTransformFromMatrix(g);t.processElement(t,o,v)}const l=Mt(e.getAttribute("marker-end")),u=l?t.idElements[l]:null;if(u){let f=u.orientAngle.baseVal.value;if(n.length>1){const g=u.getAttribute("orient");if(g==="auto"||g==="auto-start-reverse"){const v=n[n.length-2];nn(n)?f=ie(v,i,n[1]):f=Wt({x:1,y:0},{x:i.x-v.x,y:i.y-v.y})}}const p=t.sourceSvg.createSVGMatrix().translate(i.x,i.y).rotate(f).scale(se(t,u,e)),d=r?r.matrix.multiply(p):p,m=t.sourceSvg.createSVGTransformFromMatrix(d);t.processElement(t,u,m)}const h=Mt(e.getAttribute("marker-mid")),c=h?t.idElements[h]:null;if(c&&n.length>2)for(let f=0;f<n.length;f++){const p=n[f];if(f===0||f===n.length-1)continue;let d=c.orientAngle.baseVal.value;const m=c.getAttribute("orient");(m==="auto"||m==="auto-start-reverse")&&(d=ie(n[f-1],p,n[f+1]));const g=t.sourceSvg.createSVGMatrix().translate(p.x,p.y).rotate(d).scale(se(t,c,e)),v=r?r.matrix.multiply(g):g,y=t.sourceSvg.createSVGTransformFromMatrix(v);t.processElement(t,c,y)}}function se(t,e,n){const r=e.getAttribute("markerUnits");let s=1;if(!r||r==="strokeWidth"){const i=G(t,n,"stroke-width");i&&(s=_t(t,n,i,"stroke-width"))}return s}function nn(t){return e=t[0],n=t[t.length-1],e.x===n.x&&e.y===n.y;var e,n}function ie(t,e,n){const r={x:n.x-e.x,y:n.y-e.y},s=Wt(r,{x:t.x-e.x,y:t.y-e.y}),i=e.x+1,a=e.y,o=Wt(r,{x:i-e.x,y:a-e.y});return((l=s)-180*Math.sign(l))/2-o;var l}function Wt(t,e){const n=Math.atan2(t.y,t.x),r=Math.atan2(e.y,e.x)-n,s=-Math.sign(r)*Math.PI*2,i=Math.abs(s+r)<Math.abs(r)?s+r:r;return Math.round(360*i/(2*Math.PI))}function rn(t,e,{x:n,y:r,w:s,h:i}){bt(t,e,()=>{const a=document.createElementNS("http://www.w3.org/2000/svg","rect");return a.x.baseVal.value=n,a.y.baseVal.value=r,a.width.baseVal.value=s,a.height.baseVal.value=i,a})}function Es(t,e,n,r){const s=Mt(n);if(!s)return;const i=t.idElements[s];if(!i)return;const a=xe(t),o=`${s}_${a.childElementCount}`,l=document.createElementNS("http://www.w3.org/2000/svg","clipPath");l.id=o,function(c,f){if(c.tagName!=="g")return void c.setAttribute(kt,f);const p=[],d=dt(c);for(let m=d.length-1;m>=0;m--)p.push(d[m]);for(;p.length>0;){const m=p.pop();m.setAttribute(kt,f);const g=dt(m);for(let v=g.length-1;v>=0;v--)p.push(g[v])}}(e,o);const u=[],h=dt(i);for(let c=h.length-1;c>=0;c--){const f=h[c],p=Nt(t,f,r);u.push({element:f,transform:p})}for(;u.length>0;){const{element:c,transform:f}=u.pop();try{Cs(t,c,l,f)}catch(d){console.error(d)}if(c.tagName==="defs"||c.tagName==="svg"||c.tagName==="clipPath"||c.tagName==="text")continue;const p=dt(c);for(let d=p.length-1;d>=0;d--){const m=p[d],g=Nt(t,m,f);u.push({element:m,transform:g})}}l.childNodes.length>0&&a.appendChild(l)}function Cs(t,e,n,r){switch(e.tagName){case"rect":(function(s,i,a,o){const l=i.x.baseVal.value,u=i.y.baseVal.value,h=i.width.baseVal.value,c=i.height.baseVal.value;if(h===0||c===0)return;const f=i.hasAttribute("rx")?i.rx.baseVal.value:null,p=i.hasAttribute("ry")?i.ry.baseVal.value:null,d=document.createElementNS("http://www.w3.org/2000/svg","rect");d.x.baseVal.value=l,d.y.baseVal.value=u,d.width.baseVal.value=h,d.height.baseVal.value=c,f&&(d.rx.baseVal.value=f),p&&(d.ry.baseVal.value=p),pt(0,o,d),a.appendChild(d)})(0,e,n,r);break;case"circle":(function(s,i,a,o){const l=i.cx.baseVal.value,u=i.cy.baseVal.value,h=i.r.baseVal.value;if(h===0)return;const c=document.createElementNS("http://www.w3.org/2000/svg","circle");c.cx.baseVal.value=l,c.cy.baseVal.value=u,c.r.baseVal.value=h,pt(0,o,c),a.appendChild(c)})(0,e,n,r);break;case"ellipse":(function(s,i,a,o){const l=i.cx.baseVal.value,u=i.cy.baseVal.value,h=i.rx.baseVal.value,c=i.ry.baseVal.value;if(h===0||c===0)return;const f=document.createElementNS("http://www.w3.org/2000/svg","ellipse");f.cx.baseVal.value=l,f.cy.baseVal.value=u,f.rx.baseVal.value=h,f.ry.baseVal.value=c,pt(0,o,f),a.appendChild(f)})(0,e,n,r);break;case"polygon":(function(s,i,a,o){const l=document.createElementNS("http://www.w3.org/2000/svg","polygon");l.setAttribute("points",i.getAttribute("points")),pt(0,o,l),a.appendChild(l)})(0,e,n,r);break;case"path":(function(s,i,a,o){const l=document.createElementNS("http://www.w3.org/2000/svg","path");l.setAttribute("d",i.getAttribute("d")),pt(0,o,l),a.appendChild(l)})(0,e,n,r)}}function _s(t,e,n){const r=document.createElementNS("http://www.w3.org/2000/svg","g");r.setAttribute("class","text-container"),pt(0,n,r);const s=e.cloneNode(!0);s.transform.baseVal.numberOfItems>0&&s.transform.baseVal.clear(),s.removeAttribute("clip-path");const{cssFont:i,fontSize:a}=function(u,h,c=!1){const f={};let p="";const d=G(u,h,"font-style",u.useElementContext);d&&(p+=c?`font-style: ${d};`:d,f.fontStyle=d);const m=G(u,h,"font-weight",u.useElementContext);m&&(p+=c?`font-weight: ${m};`:` ${m}`,f.fontWeight=m);const g=G(u,h,"font-size",u.useElementContext);if(g&&(p+=c?`font-size: ${g};`:` ${g}`,f.fontSize=g),u.fontFamily)p+=c?`font-family: ${u.fontFamily};`:` ${u.fontFamily}`,f.fontFamiliy=u.fontFamily;else{const v=G(u,h,"font-family",u.useElementContext);v&&(p+=c?`font-family: ${v};`:` ${v}`,f.fontFamiliy=v)}return p=p.trim(),Object.assign(Object.assign({},f),{cssFont:p})}(t,e,!0);if(s.setAttribute("style",function(...u){let h="";u=u.filter(c=>c!==null);for(const c of u)h.length>0&&h[h.length-1]!==";"&&(h+=";"),h+=c;return h}(s.getAttribute("style"),i)),sn(t,e,s),s.childElementCount>0){const u=dt(s),h=dt(e);for(let c=0;c<u.length;c++){const f=u[c];f instanceof SVGTSpanElement&&sn(t,h[c],f)}}r.appendChild(s),Q(t,e,r);const o=t.fontFamily!==null,l=s.hasAttribute(kt);o&&l&&a&&function(u,h,c,f){const{width:p,height:d}=h.getBBox();if(p<=0||d<=0)return;const m=_t(u,c,f,"font-size");Cn(u,{w:p},c,m)}(t,e,s,a)}function Cn(t,e,n,r){const{w:s}=function({svgSketch:a,svgSketchIsInDOM:o},l){const u="visibility:hidden;position:absolute;left:-100%;top-100%;",h=a.getAttribute("style");h?a.setAttribute("style",`${h};${u}`):a.setAttribute("style",u);const c=document.body,f=a.parentElement;o||c.appendChild(a);const{width:p,height:d}=l.getBBox();return o||(c.removeChild(a),f&&f.appendChild(a)),h?a.setAttribute("style",h):a.removeAttribute("style"),{w:p,h:d}}(t,n);if(s<e.w||r<=1)return;const i=r-1;n.style.fontSize=`${i}px`,Cn(t,e,n,i)}function sn(t,e,n){const r=G(t,e,"stroke"),s=r?G(t,e,"stroke-width"):null,i=G(t,e,"fill"),a=G(t,e,"dominant-baseline"),o=G(t,e,"text-anchor",t.useElementContext);r&&n.setAttribute("stroke",r),s&&n.setAttribute("stroke-width",s),i&&n.setAttribute("fill",i),o&&n.setAttribute("text-anchor",o),a&&n.setAttribute("dominant-baseline",a)}function _n(t,e,n,r,s){var i,a;const o=[],l={x:0,y:0,w:r??0,h:s??0};if(e instanceof SVGSVGElement||e instanceof SVGSymbolElement||e instanceof SVGMarkerElement){let u=0,h=0;if(e instanceof SVGSymbolElement)u=parseFloat((i=e.getAttribute("x"))!==null&&i!==void 0?i:"")||0,h=parseFloat((a=e.getAttribute("y"))!==null&&a!==void 0?a:"")||0,r=r??(parseFloat(e.getAttribute("width"))||void 0),s=s??(parseFloat(e.getAttribute("height"))||void 0);else if(e instanceof SVGMarkerElement){const d=e.getAttribute("markerWidth"),m=e.getAttribute("markerHeight");r=d!==null?parseFloat(d):3,s=m!==null?parseFloat(m):3}else e!==t.sourceSvg&&(u=e.x.baseVal.value,h=e.y.baseVal.value);let c=t.sourceSvg.createSVGMatrix();if(e.getAttribute("viewBox")){const{x:d,y:m,width:g,height:v}=e.viewBox.baseVal;if(l.x=d,l.y=m,l.w=g,l.h=v,r!==void 0&&s!==void 0){const y=r/g,S=s/v,M=u+.5*r,w=h+.5*s,E=d+.5*g,_=m+.5*v;c=c.translate(M,w),c=e.getAttribute("preserveAspectRatio")==="none"?c.scaleNonUniform(y,S):c.scale(Math.min(y,S)),c=c.translate(-E,-_)}}else c=c.translate(u,h);e instanceof SVGMarkerElement&&(c=c.translate(-e.refX.baseVal.value,-e.refY.baseVal.value));const f=n?n.matrix.multiply(c):c;n=t.sourceSvg.createSVGTransformFromMatrix(f);const p=dt(e);for(let d=p.length-1;d>=0;d--){const m=p[d];if(m instanceof SVGSymbolElement||m instanceof SVGMarkerElement)continue;const g=Nt(t,m,n);o.push({element:m,transform:g,viewBox:l})}}else o.push({element:e,transform:n,viewBox:l});for(;o.length>0;){const{element:u,transform:h,viewBox:c}=o.pop();try{t.viewBox=c,Os(t,u,h)}catch(p){console.error(p)}if(u.tagName==="defs"||u.tagName==="symbol"||u.tagName==="marker"||u.tagName==="svg"||u.tagName==="clipPath")continue;const f=dt(u);for(let p=f.length-1;p>=0;p--){const d=f[p],m=Nt(t,d,h);o.push({element:d,transform:m,viewBox:c})}}}function Os(t,e,n){if(function(s){const i=s.style;return!!i&&(i.display==="none"||i.visibility==="hidden")}(e))return;const r=e.getAttribute("clip-path");switch(r&&Es(t,e,r,n),e.tagName){case"svg":case"symbol":(function(s,i,a){let o=parseFloat(i.getAttribute("width")),l=parseFloat(i.getAttribute("height"));(isNaN(o)||isNaN(l))&&(o=l=void 0),_n(s,i,a,o,l)})(t,e,n);break;case"rect":(function(s,i,a){const o=i.x.baseVal.value,l=i.y.baseVal.value,u=i.width.baseVal.value,h=i.height.baseVal.value;if(u===0||h===0)return;let c=i.hasAttribute("rx")?Math.min(Math.max(0,i.rx.baseVal.value),u/2):null,f=i.hasAttribute("ry")?Math.min(Math.max(0,i.ry.baseVal.value),h/2):null;c===null&&f===null||(c=c===null?f:c,f=f===null?c:f);const p=C({x:o,y:l},a),d=C({x:o+u,y:l+h},a),m=d.x-p.x,g=d.y-p.y,v={x:p.x,y:p.y,w:m,h:g};if(!Ot(a)&&!re(a)||c||f){let y="";if(c!==null&&f!==null){const M=1.3333333333333333*(Math.sqrt(2)-1),w=C({x:o+c,y:l},a);y+=`M ${O(w)}`,y+=`L ${O(C({x:o+u-c,y:l},a))}`;const E=C({x:o+u-c+M*c,y:l},a),_=C({x:o+u,y:l+M*f},a),V=C({x:o+u,y:l+f},a);y+=`C ${O(E)} ${O(_)} ${O(V)}`,y+=`L ${O(C({x:o+u,y:l+h-f},a))}`;const R=C({x:o+u,y:l+h-f+M*f},a),U=C({x:o+u-M*c,y:l+h},a),B=C({x:o+u-c,y:l+h},a);y+=`C ${O(R)} ${O(U)} ${O(B)}`,y+=`L ${O(C({x:o+c,y:l+h},a))}`;const k=C({x:o+c-M*c,y:l+h},a),T=C({x:o,y:l+h-M*f},a),z=C({x:o,y:l+h-f},a);y+=`C ${O(k)} ${O(T)} ${O(z)}`,y+=`L ${O(C({x:o,y:l+f},a))}`;const F=C({x:o,y:l+M*f},a),H=C({x:o+M*c,y:l},a);y+=`C ${O(F)} ${O(H)} ${O(w)}`,y+="z"}else{const M=C({x:o,y:l},a),w=C({x:o+u,y:l},a),E=C({x:o+u,y:l+h},a),_=C({x:o,y:l+h},a);y+=`M ${O(M)}`,y+=`L ${O(w)}`,y+=`L ${O(E)}`,y+=`L ${O(_)}`,y+="z"}const S=It(s,y,st(s,i,a));rn(s,i,v),Q(s,i,S)}else{const y=s.rc.rectangle(v.x,v.y,v.w,v.h,st(s,i,a));rn(s,i,v),Q(s,i,y)}})(t,e,n);break;case"path":(function(s,i,a){const o=i.getAttribute("d"),l=new b(o).toAbs().transform(Z.NORMALIZE_HVZ()).transform(Z.NORMALIZE_ST()),u=new b(l.commands.map(d=>Object.assign({},d)));a&&u.transform(Z.MATRIX(a.matrix.a,a.matrix.b,a.matrix.c,a.matrix.d,a.matrix.e,a.matrix.f));const h=Sn(u.commands);if(h.indexOf("undefined")!==-1)return void console.error("broken path data");const c=It(s,h,st(s,i,a));bt(s,i,()=>{const d=document.createElementNS("http://www.w3.org/2000/svg","path");return d.setAttribute("d",h),d}),Q(s,i,c);const f=[];let p;l.commands.forEach(d=>{switch(d.type){case b.MOVE_TO:{const m={x:d.x,y:d.y};f.push(m),p=m;break}case b.LINE_TO:case b.QUAD_TO:case b.SMOOTH_QUAD_TO:case b.CURVE_TO:case b.SMOOTH_CURVE_TO:case b.ARC:f.push({x:d.x,y:d.y});break;case b.HORIZ_LINE_TO:f.push({x:d.x,y:0});break;case b.VERT_LINE_TO:f.push({x:0,y:d.y});break;case b.CLOSE_PATH:p&&f.push(p)}}),Lt(s,i,f,a)})(t,e,n);break;case"use":(function(s,i,a){let o=i.href.baseVal;o.startsWith("#")&&(o=o.substring(1));const l=s.idElements[o];if(l){let u,h;i.getAttribute("width")&&i.getAttribute("height")&&(u=i.width.baseVal.value,h=i.height.baseVal.value);const c=i.x.baseVal.value,f=i.y.baseVal.value;let p=s.sourceSvg.createSVGMatrix().translate(c,f);p=a?a.matrix.multiply(p):p;const d=s.sourceSvg.createSVGTransformFromMatrix(p);if(s.useElementContext){const m={root:i,referenced:l,parentContext:Object.assign({},s.useElementContext)};s.useElementContext=m}else s.useElementContext={root:i,referenced:l,parentContext:null};s.processElement(s,l,Nt(s,l,d),u,h),s.useElementContext.parentContext?s.useElementContext=s.useElementContext.parentContext:s.useElementContext=null}})(t,e,n);break;case"line":(function(s,i,a){const o={x:i.x1.baseVal.value,y:i.y1.baseVal.value},l={x:i.x2.baseVal.value,y:i.y2.baseVal.value},{x:u,y:h}=C(o,a),{x:c,y:f}=C(l,a);if(u===c&&h===f)return;const p=s.rc.line(u,h,c,f,st(s,i,a));bt(s,i,()=>{const d=document.createElementNS("http://www.w3.org/2000/svg","line");return d.x1.baseVal.value=u,d.y1.baseVal.value=h,d.x2.baseVal.value=c,d.y2.baseVal.value=f,d}),Q(s,i,p),Lt(s,i,[o,l],a)})(t,e,n);break;case"circle":(function(s,i,a){const o=i.cx.baseVal.value,l=i.cy.baseVal.value,u=i.r.baseVal.value;if(u===0)return;const h=C({x:o,y:l},a),c=C({x:o+u,y:l+u},a).x-h.x;let f;if(Ot(a)||re(a))f=s.rc.circle(h.x,h.y,2*c,Object.assign(Object.assign({},st(s,i,a)),{preserveVertices:!0}));else{const p=1.3333333333333333*(Math.sqrt(2)-1),d=C({x:o+u,y:l},a),m=C({x:o,y:l+u},a),g=C({x:o-u,y:l},a),v=C({x:o,y:l-u},a),y=C({x:o+u,y:l+p*u},a),S=C({x:o+p*u,y:l+u},a),M=C({x:o-u,y:l+p*u},a),w=C({x:o-p*u,y:l-u},a),E=C({x:o+u,y:l-p*u},a);f=It(s,`M ${O(d)} C ${O(y)} ${O(S)} ${O(m)} S ${O(M)} ${O(g)} S ${O(w)} ${O(v)} S ${O(E)} ${O(d)}z`,st(s,i,a))}bt(s,i,()=>{const p=document.createElementNS("http://www.w3.org/2000/svg","circle");return p.cx.baseVal.value=h.x,p.cy.baseVal.value=h.y,p.r.baseVal.value=c,p}),Q(s,i,f)})(t,e,n);break;case"ellipse":(function(s,i,a){const o=i.cx.baseVal.value,l=i.cy.baseVal.value,u=i.rx.baseVal.value,h=i.ry.baseVal.value;if(u===0||h===0)return;const c=C({x:o,y:l},a),f=C({x:o+u,y:l+h},a),p=f.x-c.x,d=f.y-c.y;let m;if(Ot(a)||re(a))m=s.rc.ellipse(c.x,c.y,2*p,2*d,Object.assign(Object.assign({},st(s,i,a)),{preserveVertices:!0}));else{const g=1.3333333333333333*(Math.sqrt(2)-1),v=C({x:o+u,y:l},a),y=C({x:o,y:l+h},a),S=C({x:o-u,y:l},a),M=C({x:o,y:l-h},a),w=C({x:o+u,y:l+g*h},a),E=C({x:o+g*u,y:l+h},a),_=C({x:o-u,y:l+g*h},a),V=C({x:o-g*u,y:l-h},a),R=C({x:o+u,y:l-g*h},a);m=It(s,`M ${O(v)} C ${O(w)} ${O(E)} ${O(y)} S ${O(_)} ${O(S)} S ${O(V)} ${O(M)} S ${O(R)} ${O(v)}z`,st(s,i,a))}bt(s,i,()=>{const g=document.createElementNS("http://www.w3.org/2000/svg","ellipse");return g.cx.baseVal.value=c.x,g.cy.baseVal.value=c.y,g.rx.baseVal.value=p,g.ry.baseVal.value=d,g}),Q(s,i,m)})(t,e,n);break;case"polyline":(function(s,i,a){const o=je(i),l=o.map(h=>{const c=C(h,a);return[c.x,c.y]}),u=st(s,i,a);if(bt(s,i,()=>{const h=document.createElementNS("http://www.w3.org/2000/svg","polyline");return h.setAttribute("points",l.join(" ")),h}),u.fill&&u.fill!=="none"){const h=Object.assign(Object.assign({},u),{stroke:"none"});Q(s,i,s.rc.polygon(l,h))}Q(s,i,s.rc.linearPath(l,u)),Lt(s,i,o,a)})(t,e,n);break;case"polygon":(function(s,i,a){const o=je(i),l=o.map(h=>{const c=C(h,a);return[c.x,c.y]}),u=s.rc.polygon(l,st(s,i,a));bt(s,i,()=>{const h=document.createElementNS("http://www.w3.org/2000/svg","polygon");return h.setAttribute("points",l.join(" ")),h}),Q(s,i,u),o.length>0&&(o.push(o[0]),Lt(s,i,o,a))})(t,e,n);break;case"text":_s(t,e,n);break;case"image":(function(s,i,a){const o=i.href.baseVal,l=i.x.baseVal.value,u=i.y.baseVal.value;let h,c;if(i.getAttribute("width")&&i.getAttribute("height")&&(h=i.width.baseVal.value,c=i.height.baseVal.value),o.startsWith("data:")&&o.indexOf("image/svg+xml")!==-1){const f=/^data:([^,]*),(.*)/.exec(o);if(f&&f.length>2){const p=f[1];let d=f[2];const m=p.indexOf("base64")!==-1,g=p.indexOf("utf8")!==-1;m&&(d=atob(d)),g||(d=decodeURIComponent(d));const v=new DOMParser().parseFromString(d,"image/svg+xml").firstChild;let y=s.sourceSvg.createSVGMatrix().translate(l,u);y=a?a.matrix.multiply(y):y,s.processElement(s,v,s.sourceSvg.createSVGTransformFromMatrix(y),h,c)}}else{const f=i.cloneNode(),p=document.createElementNS("http://www.w3.org/2000/svg","g");pt(0,a,p),p.appendChild(f),Q(s,i,p)}})(t,e,n);break;case"foreignObject":(function(s,i,a){const o=i.cloneNode(!0),l=document.createElementNS("http://www.w3.org/2000/svg","g"),u=["color","font-family","font-size","font-style","font-variant","font-weight"],h=getComputedStyle(i);for(const c of u)l.style.setProperty(c,h.getPropertyValue(c));o.transform.baseVal.clear(),pt(0,a,l),l.appendChild(o),Q(s,o,l)})(t,e,n)}}class Ts{constructor(e){this.rng=e?new cn(e):null}next(e){var n,r;const s=(r=(n=this.rng)===null||n===void 0?void 0:n.next())!==null&&r!==void 0?r:Math.random();if(e){const i=e[0];return s*(e[1]-i)+i}return s}}class ks{set svg(e){this.$svg!==e&&(this.$svg=e,this.sourceSvgChanged())}get svg(){return this.$svg}set outputType(e){if(this.$outputType!==e){if(e===ft.CANVAS&&this.outputElement instanceof SVGSVGElement||e===ft.SVG&&this.outputElement instanceof HTMLCanvasElement)throw new Error(`Output format ${e} incompatible with given output element ${this.outputElement.tagName}`);this.$outputType=e}}get outputType(){return this.$outputType}set roughConfig(e){e.fixedDecimalPlaceDigits===void 0&&(e.fixedDecimalPlaceDigits=3),this.$roughConfig=e}get roughConfig(){return this.$roughConfig}constructor(e,n=ft.SVG,r={}){if(this.backgroundColor=null,this.fontFamily="Comic Sans MS, cursive",this.randomize=!0,this.seed=null,this.sketchPatterns=!0,this.pencilFilter=!1,this.width=0,this.height=0,this.$roughConfig={},this.idElements={},this.lastResult=null,!e)throw new Error("No target provided");const s=typeof e=="string"?document.querySelector(e):e;if(!s)throw new Error("Could not find target in document");this.roughConfig=r,this.outputElement=s,s instanceof HTMLCanvasElement?this.$outputType=ft.CANVAS:s instanceof SVGSVGElement?this.$outputType=ft.SVG:this.$outputType=n}sketch(e=!1){var n,r;if(!this.svg)return Promise.resolve(null);e&&this.sourceSvgChanged();const s=this.prepareRenderContainer(),i=this.createRenderContext(s);if(this.pencilFilter&&xe(i).appendChild(function(){const a=document.createElementNS("http://www.w3.org/2000/svg","filter");a.setAttribute("id","pencilTextureFilter"),a.setAttribute("x","0%"),a.setAttribute("y","0%"),a.setAttribute("width","100%"),a.setAttribute("height","100%"),a.setAttribute("filterUnits","objectBoundingBox");const o=document.createElementNS("http://www.w3.org/2000/svg","feTurbulence");o.setAttribute("type","fractalNoise"),o.setAttribute("baseFrequency","2"),o.setAttribute("numOctaves","5"),o.setAttribute("stitchTiles","stitch"),o.setAttribute("result","f1"),a.appendChild(o);const l=document.createElementNS("http://www.w3.org/2000/svg","feColorMatrix");l.setAttribute("type","matrix"),l.setAttribute("values","0 0 0 0 0, 0 0 0 0 0, 0 0 0 0 0, 0 0 0 -1.5 1.5"),l.setAttribute("result","f2"),a.appendChild(l);const u=document.createElementNS("http://www.w3.org/2000/svg","feComposite");return u.setAttribute("operator","in"),u.setAttribute("in","SourceGraphic"),u.setAttribute("in2","f2"),u.setAttribute("result","f3"),a.appendChild(u),a}()),i.processElement(i,this.svg,null,this.width,this.height),this.outputElement instanceof SVGSVGElement)return Promise.resolve(this.outputElement);if(this.outputElement instanceof HTMLCanvasElement)return this.drawToCanvas(i,this.outputElement);if((r=(n=this.lastResult)===null||n===void 0?void 0:n.parentNode)===null||r===void 0||r.removeChild(this.lastResult),this.outputType===ft.SVG){const a=i.svgSketch;return this.outputElement.appendChild(a),this.lastResult=a,Promise.resolve(a)}{const a=document.createElement("canvas");return this.outputElement.appendChild(a),this.lastResult=a,this.drawToCanvas(i,a)}}createRenderContext(e){if(!this.svg)throw new Error("No source SVG set yet.");let n=this.roughConfig;return this.seed!==null&&(n=Object.assign({seed:this.seed},n)),{rc:Br.svg(e,{options:n}),roughConfig:this.roughConfig,fontFamily:this.fontFamily,pencilFilter:this.pencilFilter,randomize:this.randomize,rng:new Ts(this.seed),sketchPatterns:this.sketchPatterns,idElements:this.idElements,sourceSvg:this.svg,svgSketch:e,svgSketchIsInDOM:document.body.contains(e),styleSheets:Array.from(this.svg.querySelectorAll("style")).map(r=>r.sheet).filter(r=>r!==null),processElement:_n}}drawToCanvas(e,n){n.width=this.width,n.height=this.height;const r=n.getContext("2d");return r.clearRect(0,0,this.width,this.height),new Promise(s=>{const i=new XMLSerializer().serializeToString(e.svgSketch),a=new Image;a.onload=function(){r.drawImage(this,0,0),s(n)},a.src=`data:image/svg+xml;charset=utf8,${encodeURIComponent(i)}`})}prepareRenderContainer(){let e,n;for(e=this.outputElement instanceof SVGSVGElement?this.outputElement:document.createElementNS("http://www.w3.org/2000/svg","svg"),e.setAttribute("xmlns","http://www.w3.org/2000/svg"),e.setAttributeNS("http://www.w3.org/2000/xmlns/","xmlns:xlink","http://www.w3.org/1999/xlink");e.firstChild;)e.removeChild(e.firstChild);return e.setAttribute("width",this.width.toString()),e.setAttribute("height",this.height.toString()),this.backgroundColor&&(n=document.createElementNS("http://www.w3.org/2000/svg","rect"),n.width.baseVal.value=this.width,n.height.baseVal.value=this.height,n.setAttribute("fill",this.backgroundColor),e.appendChild(n)),e.setAttribute("stroke-linecap","round"),e}sourceSvgChanged(){const e=this.$svg;if(e){const n=this.roughConfig.fixedDecimalPlaceDigits;this.width=parseFloat(this.coerceSize(e,"width",300).toFixed(n)),this.height=parseFloat(this.coerceSize(e,"height",150).toFixed(n)),this.collectElementsWithID()}}collectElementsWithID(){this.idElements={};const e=Array.prototype.slice.apply(this.svg.querySelectorAll("*[id]"));for(const n of e){const r=n.getAttribute("id");r&&(this.idElements[r]=n)}}coerceSize(e,n,r){let s=r;const i=e.hasAttribute("viewBox");return e.hasAttribute(n)?s=e[n].baseVal.unitType===SVGLength.SVG_LENGTHTYPE_PERCENTAGE&&i?e.viewBox.baseVal[n]:e[n].baseVal.value:i&&(s=e.viewBox.baseVal[n]),s}}var Ns=Dn('<div id="view"><div id="container" class="h-full overflow-auto"></div></div>');function Hs(t,e){Pn(e,!0);const[n,r]=Fn(),s=()=>Se(Ee,"$inputStateStore",n),i=()=>Se(Qn,"$mode",n);let a=Ce(e,"panZoomState",23,()=>new fr),o=Ce(e,"shouldShowGrid",3,!0),l="",u="",h=Yt(void 0),c,f=Yt(void 0),p=Yt(!1),d=!0,m=!0;const g=()=>{a().onPanZoomChange=(w,E)=>{Wn({pan:w,zoom:E}),jn("panZoom")}},v=(w,E)=>{a().updateElement(E,w)},y=async w=>{var R,U,B;const E=Date.now();if(w.error!==void 0){xt(p,!0);return}xt(p,!1);let _;try{if(ot(h)){if(m=!0,l===w.code&&u===w.mermaid&&c===w.rough&&d===w.panZoom||!nr())return;l=w.code,u=w.mermaid,c=w.rough,d=w.panZoom??!0;const k=(U=(R=ot(f))==null?void 0:R.parentElement)==null?void 0:U.scrollTop;delete ot(h).dataset.processed;const T=Kn("graph-"),{svg:z,bindFunctions:F,diagramType:H}=await Xn(JSON.parse(w.mermaid),l,T);if(_=H,z.length>0){ot(h).innerHTML=z;let D=document.querySelector(`#${T}`);if(!D)throw new Error("graph-div not found");if(w.rough){const q=new ks("#container");q.svg=D,await q.sketch(),D.remove();const N=document.querySelector("#container > svg");if(!N)throw new Error("sketch not found");const I=N.getAttribute("height"),K=N.getAttribute("width");N.setAttribute("id","graph-div"),N.setAttribute("height","100%"),N.setAttribute("width","100%"),N.setAttribute("viewBox",`0 0 ${K} ${I}`),N.style.maxWidth="100%",D=N}else D.setAttribute("height","100%"),D.style.maxWidth="100%",F&&F(D);w.panZoom&&v(w,D)}(B=ot(f))!=null&&B.parentElement&&k&&(ot(f).parentElement.scrollTop=k),xt(p,!1)}else m&&(m=!1)}catch(k){console.error("view fail",k),xt(p,!0)}const V=Date.now()-E;Yn({code:l,diagramType:_,isRough:w.rough,renderTime:V}),er(V,()=>{Hn(Ee,Me(s).updateDiagram=!0,Me(s))})};Vn(()=>{g();let w=Promise.resolve();Gn.subscribe(E=>{w=w.then(()=>y(E).catch(()=>{}))})});var S=Ns(),M=In(S);_e(M,w=>xt(h,w),()=>ot(h)),Ln(S),_e(S,w=>xt(f,w),()=>ot(f)),Rn(()=>Un(S,1,qn(["h-full w-full",o()&&`grid-bg-${i()}`,ot(p)&&"opacity-50"]),"svelte-4502l3")),Zn(t,S),zn(),r()}export{fr as P,Hs as V,Fs as w};
